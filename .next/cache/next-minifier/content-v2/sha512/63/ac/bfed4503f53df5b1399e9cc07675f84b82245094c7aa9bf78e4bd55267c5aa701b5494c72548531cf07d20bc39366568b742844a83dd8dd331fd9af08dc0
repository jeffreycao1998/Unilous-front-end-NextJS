{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{S6mx:function(t,e,n){\"use strict\";n.r(e);var r=n(\"q1tI\"),o=n.n(r),a=n(\"/MKj\"),s=n(\"beb+\"),i=n.n(s),c=n(\"uYsV\"),l=n(\"ttZb\"),u=n(\"0J1E\"),d=n(\"6Ysq\"),v=n(\"YFqc\"),f=n.n(v),m=n(\"VFWX\"),h=n(\"BkJp\"),p=n(\"gH2n\"),y=n(\"2E1m\"),g=n(\"ANjH\"),w=n(\"nOHt\"),b=n(\"5Yp1\"),C=n(\"8Kt/\"),S=n.n(C),N=o.a.createElement;function j(t){if(\"undefined\"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if(\"string\"===typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);\"Object\"===n&&t.constructor&&(n=t.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(t);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var k=Object(w.withRouter)((function(t){var e=t.posts?t.posts.map((function(t){return t._id})):[],n=Object(r.useState)(!1),o=n[0],a=n[1],s=\"all\"===decodeURIComponent(t.router.query.searchQuery)?\"\":decodeURIComponent(t.router.query.searchQuery),d=Object(l.useQuery)(u.i,{variables:{filterString:s,postIds:e,eventQuery:t.eventSearch}});window.innerHeight+window.scrollY>document.body.offsetHeight-100&&!o&&a(!0),window.innerHeight+window.scrollY<=document.body.offsetHeight-100&&o&&a(!1);window.addEventListener(\"scroll\",(function(){window.innerHeight+window.scrollY>document.body.offsetHeight-100&&!o&&a(!0),window.innerHeight+window.scrollY<=document.body.offsetHeight-100&&o&&a(!1)}),!1);var v=function(t,e){if(!o)return!1;if(!t)return!1;if(!t.searchPosts)return!1;if(!e)return!0;var n,r=t.searchPosts.map((function(t){return t.title})),a=e.map((function(t){return t.title})),s=j(r);try{for(s.s();!(n=s.n()).done;){var i=n.value;if(!a.includes(i))return!0}}catch(c){s.e(c)}finally{s.f()}return!1}(d.data,t.posts)?d.data.searchPosts:null;if(Object(r.useEffect)((function(){v&&!t.posts&&(t.addPosts(d.data.searchPosts),a(!1)),v&&t.posts&&v.length>0&&(t.posts.map((function(t){return t._id})).includes(v[0]._id)||(t.addPosts(d.data.searchPosts),a(!1)))}),[d,t.addPosts,t,v]),!t.posts&&!d.data)return N(\"div\",null,N(\"div\",{style:{height:\"5vh\"}}),N(m.a,null));var p=t.eventSearch,y=function(){return\"COVID-19\"===p?[\"covid\",\"coronavirus\",\"outbreak\",\"virus\",\"emergency response\"]:\"2020 Election\"===p?[\"election\",\"democrat\",\"republican\",\"vote\"]:null},g=t.posts?t.posts.filter((function(t){return function(t){if(y()){var e,n=j(y());try{for(n.s();!(e=n.n()).done;){var r=e.value;if((t.description.toLowerCase().includes(r)||t.title.toLowerCase().includes(r))&&t.title.toLowerCase().includes(s.toLowerCase()))return!0}}catch(c){n.e(c)}finally{n.f()}return!1}if(t.title.toLowerCase().includes(s.toLowerCase()))return!0;var o,a=j(t.skillNames);try{for(a.s();!(o=a.n()).done;){var i=o.value;if(s.includes(i))return!0}}catch(c){a.e(c)}finally{a.f()}return!1}(t)})):[],w=g?g.map((function(e){return N(c.a,{stretch:t.stretchLayout,key:\"post\".concat(e._id),post:e})})):[],C=(Object(h.a)(\"rgb(40,40,40)\").colorPallette,t.stretchLayout?i.a.layoutButtonGrid:i.a.layoutButtonStretch),E=t.stretchLayout?i.a.resultsContentStretch:i.a.resultsContentGrid,k=[{name:\"COVID-19\",color:\"rgb(237,32,40)\",iconB:\"/svg/events/virusB.svg\",iconW:\"/svg/events/virusW.svg\",iconC:\"/svg/events/virusC.svg\"},{name:\"2020 Election\",color:\"rgb(255,0,255)\",iconB:\"/svg/events/usaB.svg\",iconW:\"/svg/events/usaW.svg\",iconC:\"/svg/events/usaC.svg\"}].map((function(e){return e.name===t.eventSearch?N(\"div\",{className:i.a.eventSelected,onClick:function(){return t.setEventSearch(null)},style:{borderColor:e.color,backgroundColor:e.color},key:\"EV\".concat(e.name)},N(\"img\",{src:e.iconW,className:i.a.eventImage,alt:e.name}),N(\"h3\",{className:i.a.eventText},e.name)):N(\"div\",{className:i.a.event,onClick:function(){return t.setEventSearch(e.name)},style:{borderColor:e.color,color:e.color},key:\"EV\".concat(e.name)},N(\"img\",{src:e.iconC,className:i.a.eventImage,alt:e.name}),N(\"h3\",{className:i.a.eventText},e.name))})),B=t.eventSearch?i.a.ECActive:null,L=d.data&&null===d.data.searchPosts?N(\"h3\",{style:{opacity:\"0.8\"}},\"no more posts\"):N(m.a,null),P=g.map((function(t){return t.title})).join(\", \");return N(b.a,null,N(S.a,null,N(\"title\",null,\"Browse for projects in Unilous\"),N(\"meta\",{property:\"og:title\",content:\"Browse for projects in Unilous\",key:\"title\"}),N(\"meta\",{property:\"og:description\",content:\"Unilous projects: \".concat(P,\".\"),key:\"description\"}),N(\"meta\",{name:\"twitter:title\",content:\"Browse for projects in Unilous\",key:\"title\"}),N(\"meta\",{name:\"description\",content:\"Unilous projects: \".concat(P,\".\"),key:\"description\"})),N(\"div\",{className:\"home-wrapper\"},N(\"div\",{className:i.a.resultsContainer},N(f.a,{href:\"/PostFormPage\"},N(\"a\",{className:\"\".concat(i.a.formContainerExpand,\" standard-hover neutralize-link\"),title:\"add post\"},N(\"img\",{className:i.a.formExpandIcon,src:\"/svg/plusW.svg\",alt:\"team up\"}))),N(\"div\",{className:\"navbar-height\"}),N(\"h2\",{className:i.a.secondaryTitle},\"events\"),N(\"div\",{className:\"\".concat(i.a.eventsContainer,\" \").concat(B)},k),N(\"div\",{onClick:function(){return t.toggleStretchLayout(!t.stretchLayout)},className:i.a.layoutWrapper},N(\"div\",{className:i.a.layoutContainer},N(\"div\",{className:\"layoutButton \".concat(C)},N(\"div\",{className:i.a.layoutBox}),N(\"div\",{className:i.a.layoutBox}),N(\"div\",{className:i.a.layoutBox}),N(\"div\",{className:i.a.layoutBox})))),N(\"div\",null),N(\"div\",{className:\"resultsContent \".concat(E)},w),N(\"div\",{style:{position:\"relative\",height:\"400px\"}},L))))}));e.default=Object(a.b)((function(t){return{posts:t.posts,stretchLayout:t.stretchLayout,eventSearch:t.eventSearch}}),(function(t){return{addPosts:Object(g.b)(d.a,t),toggleStretchLayout:Object(g.b)(p.b,t),setEventSearch:Object(g.b)(y.b,t)}}))(k)},ST3h:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/results/[searchQuery]\",function(){return n(\"S6mx\")}])}},[[\"ST3h\",1,2,0,4,3,5,6,7,8,9,10]]]);","extractedComments":[]}