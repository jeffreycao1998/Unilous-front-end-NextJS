{"ast":null,"code":"var _jsxFileName = \"C:\\\\Code\\\\Projects\\\\projectU\\\\projectu\\\\components\\\\user\\\\structure\\\\Logged.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { useQuery } from '@apollo/react-hooks';\nimport { FIND_USER } from '../../../src/schemas/queries'; // import userIcon from '../../../static/svg/userW.svg'\n\nimport { setCurrentUser } from '../../../redux/reducers/currentUser';\nimport { Link } from 'react-router-dom';\nimport { clearToken } from '../../../redux/reducers/token'; // import exitIcon from '../../../static/svg/exitB.svg'\n// import plusIcon from '../../../static/svg/plusB.svg'\n// import userIconSB from '../../../static/svg/userSB.svg'\n// import bellIconB from '../../../static/svg/bellB.svg'\n// import heartIconB from '../../../static/svg/heartB.svg'\n// import userIconW from '../../../static/svg/userW.svg'\n// import bellIconW from '../../../static/svg/bellW.svg'\n// import heartIconW from '../../../static/svg/heartW.svg'\n\nimport UserNotifList from '../utilities/UserNotifList';\nimport UserSP from '../utilities/UserSP';\nimport UU from '../../../styles/user/userUtilities.module.css';\n\nconst Logged = props => {\n  const {\n    0: showUtilities,\n    1: setShowUtilities\n  } = useState(true);\n  const {\n    0: utilityShown,\n    1: setUtilityShown\n  } = useState('');\n  const currentUserUN = localStorage.getItem('username') ? localStorage.getItem('username') : 'fakeUser';\n  const userQuery = useQuery(FIND_USER, {\n    variables: {\n      username: currentUserUN\n    }\n  });\n\n  const userQueryConditions = () => {\n    const query = userQuery.data;\n    const reducer = props.currentUser;\n\n    if (!query) {\n      return null;\n    }\n\n    if (!query.findUser) {\n      return null;\n    }\n\n    if (reducer) {\n      if (query.findUser.username === reducer.username) {\n        return null;\n      }\n    }\n\n    return query.findUser;\n  };\n\n  const userResult = userQueryConditions();\n  useEffect(() => {\n    if (userResult) {\n      props.setCurrentUser(userResult);\n    }\n  }, [props, props.currentUser, userResult]);\n\n  if (!props.currentUser) {\n    return __jsx(\"div\", {\n      className: \"user-container LGD-user-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"user-options-splitter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: \"user-icon-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }\n    })), __jsx(\"div\", {\n      className: \"user-banner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }\n    }));\n  }\n\n  const logout = () => {\n    localStorage.clear();\n    props.clearToken();\n  };\n\n  const changeUtilityShown = changeTo => {\n    if (changeTo === utilityShown) {\n      setUtilityShown(null);\n    } else {\n      setUtilityShown(changeTo);\n    }\n\n    setShowUtilities(true);\n  };\n\n  const changeShowUtilities = changeTo => {\n    if (!changeTo) {\n      setShowUtilities(changeTo);\n      setUtilityShown(null);\n    } else {\n      setShowUtilities(changeTo);\n    }\n  };\n\n  const usernameIcon = props.currentUser.username.substr(0, 1).toUpperCase();\n  const iconToShow = showUtilities ? __jsx(Link, {\n    to: `/user/${encodeURIComponent(props.currentUser.username)}`,\n    className: \"user-icon-container UICH neutralize-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: \"user-username-icon user-icon-hover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, usernameIcon)) : __jsx(Link, {\n    to: `/user/${encodeURIComponent(props.currentUser.username)}`,\n    className: \"user-icon-container UICH\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, __jsx(\"img\", {\n    src: userIcon,\n    className: \"user-icon user-icon-hover\",\n    alt: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }));\n  const basicStyles = {\n    user: {\n      className: '',\n      icon: \"/svg/userSB.svg\"\n    },\n    notifications: {\n      className: '',\n      icon: \"/svg/bellB.svg\"\n    },\n    following: {\n      className: '',\n      icon: \"/svg/heartB.svg\"\n    }\n  };\n\n  if (utilityShown === 'user') {\n    basicStyles.user = {\n      className: 'UUO-selected',\n      icon: \"/svg/userW.svg\"\n    };\n  }\n\n  if (utilityShown === 'notifications') {\n    basicStyles.notifications = {\n      className: 'UUO-selected',\n      icon: bellIconW\n    };\n  }\n\n  if (utilityShown === 'following') {\n    basicStyles.following = {\n      className: 'UUO-selected',\n      icon: heartIconW\n    };\n  }\n\n  const pendingNotifStats = props.currentUser && props.currentUser.pendingNotifications > 0 ? ['PN-bubble', props.currentUser.pendingNotifications] : [null, null];\n  const showInBanner = showUtilities ? __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, __jsx(Link, {\n    to: \"/post-form/\",\n    className: \"UU-add-post user-utility-option neutralize-link\",\n    style: {\n      gridColumn: '1/3'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: \"/svg/plusB.svg\",\n    className: \"UUAP-icon\",\n    alt: \"add post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }), __jsx(\"h4\", {\n    className: \"UUAP-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, \"add post\")), __jsx(Link, {\n    to: `/user/${props.currentUser.username}`,\n    className: `user-utility-option ${basicStyles.user.className}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: basicStyles.user.icon,\n    className: \"UU-icon\",\n    alt: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    onClick: () => changeUtilityShown('notifications'),\n    className: `user-utility-option PN-container ${basicStyles.notifications.className}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: basicStyles.notifications.icon,\n    className: \"UU-icon\",\n    alt: \"notifications\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    className: pendingNotifStats[0],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, pendingNotifStats[1])), __jsx(\"div\", {\n    onClick: () => changeUtilityShown('following'),\n    className: `user-utility-option ${basicStyles.following.className}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: basicStyles.following.icon,\n    className: \"UU-icon\",\n    alt: \"follow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    onClick: () => logout(),\n    className: \"user-utility-option UU-logout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: \"/svg/exitB.svg\",\n    className: \"UU-logout-icon\",\n    alt: \"log out\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }))) : __jsx(\"div\", {\n    onClick: () => changeShowUtilities(!showUtilities),\n    className: \"user-username-container SUH\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, __jsx(\"h2\", {\n    className: \"user-username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 106\n    }\n  }, props.currentUser.username));\n  const showBubble = showUtilities ? __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }) : __jsx(\"div\", {\n    onClick: () => changeUtilityShown('notifications'),\n    className: \"user-notification-bubble\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, \"4\");\n  const showUtilityContent = utilityShown ? {\n    display: 'block'\n  } : {\n    display: 'none'\n  };\n\n  const utilityContent = () => {\n    // if (utilityShown === 'user') {\n    //     return <div><UserInfo /></div>\n    // }\n    if (utilityShown === 'notifications') {\n      return __jsx(UserNotifList, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 20\n        }\n      });\n    }\n\n    if (utilityShown === 'following') {\n      return __jsx(UserSP, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return null;\n  };\n\n  return __jsx(\"div\", {\n    className: \"user-container LGD-user-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"user-options-splitter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, iconToShow), __jsx(\"div\", {\n    className: \"user-banner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, showInBanner), showBubble, __jsx(\"div\", {\n    className: \"UU-utilities-splitter\",\n    style: showUtilityContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: \"UU-content-container\",\n    style: showUtilityContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }, utilityShown), utilityContent()));\n};\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.currentUser\n  };\n};\n\nexport default connect(mapStateToProps, {\n  clearToken,\n  setCurrentUser\n})(Logged);","map":{"version":3,"sources":["C:/Code/Projects/projectU/projectu/components/user/structure/Logged.js"],"names":["React","useState","useEffect","connect","useQuery","FIND_USER","setCurrentUser","Link","clearToken","UserNotifList","UserSP","UU","Logged","props","showUtilities","setShowUtilities","utilityShown","setUtilityShown","currentUserUN","localStorage","getItem","userQuery","variables","username","userQueryConditions","query","data","reducer","currentUser","findUser","userResult","logout","clear","changeUtilityShown","changeTo","changeShowUtilities","usernameIcon","substr","toUpperCase","iconToShow","encodeURIComponent","userIcon","basicStyles","user","className","icon","notifications","following","bellIconW","heartIconW","pendingNotifStats","pendingNotifications","showInBanner","gridColumn","showBubble","showUtilityContent","display","utilityContent","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { useQuery } from '@apollo/react-hooks'\r\nimport { FIND_USER } from '../../../src/schemas/queries'\r\n// import userIcon from '../../../static/svg/userW.svg'\r\nimport { setCurrentUser } from '../../../redux/reducers/currentUser'\r\nimport { Link } from 'react-router-dom'\r\nimport { clearToken } from '../../../redux/reducers/token'\r\n// import exitIcon from '../../../static/svg/exitB.svg'\r\n// import plusIcon from '../../../static/svg/plusB.svg'\r\n// import userIconSB from '../../../static/svg/userSB.svg'\r\n// import bellIconB from '../../../static/svg/bellB.svg'\r\n// import heartIconB from '../../../static/svg/heartB.svg'\r\n// import userIconW from '../../../static/svg/userW.svg'\r\n// import bellIconW from '../../../static/svg/bellW.svg'\r\n// import heartIconW from '../../../static/svg/heartW.svg'\r\nimport UserNotifList from '../utilities/UserNotifList'\r\nimport UserSP from '../utilities/UserSP'\r\nimport UU from '../../../styles/user/userUtilities.module.css'\r\n\r\nconst Logged = (props) => {\r\n    const [showUtilities, setShowUtilities] = useState(true)\r\n    const [utilityShown, setUtilityShown] = useState('')\r\n\r\n    const currentUserUN = localStorage.getItem('username') ? localStorage.getItem('username') : 'fakeUser'\r\n    const userQuery = useQuery(FIND_USER, {\r\n        variables: {username: currentUserUN}\r\n    })\r\n    const userQueryConditions = () => {\r\n        const query = userQuery.data\r\n        const reducer = props.currentUser\r\n        if (!query) { return null }\r\n        if (!query.findUser) { return null }\r\n        if (reducer) {\r\n            if (query.findUser.username === reducer.username) { return null }\r\n        }\r\n        return query.findUser\r\n    }\r\n    const userResult = userQueryConditions()\r\n\r\n    useEffect(() => {\r\n        if (userResult) {\r\n            props.setCurrentUser(userResult)\r\n        }\r\n    }, [props, props.currentUser, userResult])\r\n\r\n    if (!props.currentUser) {\r\n        return (\r\n            <div className=\"user-container LGD-user-container\">\r\n                <div className=\"user-options-splitter\">\r\n                    <div className=\"user-icon-container\">\r\n                        {/* <img src={userIcon} className=\"user-icon\" alt=\"user\" /> */}\r\n                    </div>\r\n                </div>\r\n                <div className=\"user-banner\">\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n    const logout = () => {\r\n        localStorage.clear()\r\n        props.clearToken()\r\n    }\r\n\r\n    const changeUtilityShown = (changeTo) => {\r\n        if (changeTo === utilityShown) {\r\n            setUtilityShown(null)\r\n        }\r\n        else {\r\n            setUtilityShown(changeTo)\r\n        }\r\n        setShowUtilities(true)\r\n    }\r\n    const changeShowUtilities = (changeTo) => {\r\n        if (!changeTo) {\r\n            setShowUtilities(changeTo)\r\n            setUtilityShown(null)\r\n        }\r\n        else {\r\n            setShowUtilities(changeTo)\r\n        }\r\n    }\r\n    const usernameIcon = props.currentUser.username.substr(0, 1).toUpperCase()\r\n\r\n    const iconToShow = showUtilities ?\r\n        <Link to={`/user/${encodeURIComponent(props.currentUser.username)}`} className=\"user-icon-container UICH neutralize-link\">\r\n            <h1 className=\"user-username-icon user-icon-hover\">{usernameIcon}</h1>\r\n        </Link>\r\n        :\r\n        <Link to={`/user/${encodeURIComponent(props.currentUser.username)}`} className=\"user-icon-container UICH\">\r\n            <img src={userIcon} className=\"user-icon user-icon-hover\" alt=\"user\" />\r\n        </Link>\r\n\r\n    const basicStyles = {user: {className: '', icon: \"/svg/userSB.svg\"}, notifications: {className: '', icon: \"/svg/bellB.svg\"}, following: {className: '', icon: \"/svg/heartB.svg\"}}\r\n    if (utilityShown === 'user') { basicStyles.user = {className: 'UUO-selected', icon: \"/svg/userW.svg\"}}\r\n    if (utilityShown === 'notifications') { basicStyles.notifications = {className: 'UUO-selected', icon: bellIconW}}\r\n    if (utilityShown === 'following') { basicStyles.following = {className: 'UUO-selected', icon: heartIconW}}\r\n    \r\n    const pendingNotifStats = props.currentUser && props.currentUser.pendingNotifications > 0 ?\r\n        ['PN-bubble', props.currentUser.pendingNotifications] : [null, null]\r\n\r\n    const showInBanner = showUtilities ?\r\n        <React.Fragment>\r\n            <Link to=\"/post-form/\" className=\"UU-add-post user-utility-option neutralize-link\" style={{gridColumn: '1/3'}}>\r\n                <img src=\"/svg/plusB.svg\" className=\"UUAP-icon\" alt=\"add post\"/>\r\n                <h4 className=\"UUAP-text\">add post</h4>\r\n            </Link>\r\n            <Link to={`/user/${props.currentUser.username}`} className={`user-utility-option ${basicStyles.user.className}`}>\r\n                <img src={basicStyles.user.icon} className=\"UU-icon\" alt=\"user\" />\r\n            </Link>\r\n            <div onClick={() => changeUtilityShown('notifications')} className={`user-utility-option PN-container ${basicStyles.notifications.className}`}>\r\n                <img src={basicStyles.notifications.icon} className=\"UU-icon\" alt=\"notifications\" />\r\n                <div className={pendingNotifStats[0]}>{pendingNotifStats[1]}</div>\r\n            </div>\r\n            <div onClick={() => changeUtilityShown('following')} className={`user-utility-option ${basicStyles.following.className}`}>\r\n                <img src={basicStyles.following.icon} className=\"UU-icon\" alt=\"follow\" />\r\n            </div>\r\n            <div onClick={() => logout()} className=\"user-utility-option UU-logout\">\r\n                <img src=\"/svg/exitB.svg\" className=\"UU-logout-icon\" alt=\"log out\" />\r\n            </div>\r\n        </React.Fragment>\r\n        :\r\n        <div onClick={() => changeShowUtilities(!showUtilities)} className=\"user-username-container SUH\"><h2 className=\"user-username\">{props.currentUser.username}</h2></div>\r\n\r\n    const showBubble = showUtilities ?\r\n        <div />\r\n        :\r\n        <div onClick={() => changeUtilityShown('notifications')} className=\"user-notification-bubble\">4</div>\r\n\r\n\r\n    const showUtilityContent = utilityShown ? \r\n        {display: 'block'} : {display: 'none'}\r\n\r\n    const utilityContent = () => {\r\n        // if (utilityShown === 'user') {\r\n        //     return <div><UserInfo /></div>\r\n        // }\r\n        if (utilityShown === 'notifications') {\r\n            return <UserNotifList />\r\n        }\r\n        if (utilityShown === 'following') {\r\n            return <UserSP />\r\n        }\r\n        return null\r\n    }\r\n    \r\n    return (\r\n        <div className=\"user-container LGD-user-container\">\r\n            <div className=\"user-options-splitter\">\r\n                {iconToShow}\r\n            </div>\r\n            <div className=\"user-banner\">\r\n                {showInBanner}\r\n            </div>\r\n            {showBubble}\r\n            <div className=\"UU-utilities-splitter\" style={showUtilityContent}/>\r\n            <div className=\"UU-content-container\" style={showUtilityContent}>\r\n                <h3>{utilityShown}</h3>\r\n                {utilityContent()}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n        currentUser: state.currentUser\r\n\t}\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    { clearToken, setCurrentUser }\r\n)(Logged)"]},"metadata":{},"sourceType":"module"}