{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\Code\\\\Projects\\\\projectU\\\\projectu\\\\pages\\\\post\\\\[title].js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { MAKE_NOTIFICATION, ASK_QUESTION, SAVE_POST } from '../../src/schemas/mutations';\nimport { Q_AND_A_NOTIFS } from '../../src/schemas/queries';\nimport Link from 'next/link';\nimport Loading from '../../components/Loading';\nimport ppStyle from '../../styles/pages/newPostPage.module.css'; // import userIcon from '../../static/svg/userB.svg'\n\nimport PostImages from '../../components/postPage/PostImages';\nimport PostLinks from '../../components/postPage/PostLinks';\nimport PostQandA from '../../components/postPage/PostQandA';\nimport InputHeader from '../../components/text-field/InputHeader';\nimport FormContainer from '../../components/text-field/FormContainer'; // import plusIcon from '../../static/svg/plusW.svg'\n// import discordIcon from '../../static/svg/websites/discord.svg'\n// import searchIcon from '../../static/svg/searchWW.svg'\n\nimport { setCurrentUserSP } from '../../redux/reducers/currentUser';\nimport { setAlert, resetAlert } from '../../redux/reducers/alertNotif';\nimport { useField, triggerAlert, palletteGenerator } from '../../src/functions/functions';\nimport { bindActionCreators } from 'redux';\nimport { setToken } from '../../redux/reducers/token';\nimport apollo from '../../lib/apollo';\nimport { withRouter } from 'next/router';\nconst PostPage = withRouter(_c = _s(props => {\n  _s();\n\n  const {\n    0: currentPost,\n    1: setCurrentPost\n  } = useState();\n  const {\n    0: skillExpanded,\n    1: setSkillExpanded\n  } = useState(null);\n  const question = useField('text');\n  const message = useField('text');\n\n  const onJoinError = e => {\n    if (e.message.includes('is longer than the maximum allowed length')) {\n      triggerAlert('warning', `message$: message of ${message.fields.value.length} characters exceeded the maximum of 800 characters.`, props.setAlert, props.resetAlert);\n    }\n  };\n\n  const onQuestionError = e => {\n    if (e.message.includes('is longer than the maximum allowed length')) {\n      triggerAlert('warning', `question$: question of ${question.fields.value.length} characters exceeded the maximum of 800 characters.`, props.setAlert, props.resetAlert);\n    }\n  };\n\n  const onFollowError = e => {\n    console.log(e);\n  };\n\n  const [followMutation] = useMutation(SAVE_POST, {\n    onError: onFollowError\n  });\n  const [makeNotification] = useMutation(MAKE_NOTIFICATION, {\n    onError: onJoinError\n  });\n  const [askQuestion] = useMutation(ASK_QUESTION, {\n    onError: onQuestionError\n  });\n\n  const handleFollow = async () => {\n    if (!props.token) {\n      triggerAlert('warning', 'sign in$: must be signed in to perform this action', props.setAlert, props.resetAlert);\n    }\n\n    const result = await followMutation({\n      variables: {\n        user: props.currentUser._id,\n        postId: currentPost._id\n      }\n    });\n\n    if (result) {\n      props.setCurrentUserSP(props.currentUser.savedPosts.concat(currentPost));\n      triggerAlert('success', 'followed$: you are now following this post', props.setAlert, props.resetAlert);\n    }\n  };\n\n  const qandaQuery = useQuery(Q_AND_A_NOTIFS, {\n    variables: {\n      title: decodeURIComponent(props.postTitle)\n    }\n  }); // const postQuery = useQuery(FIND_POST, {\n  //     variables: {title: decodeURIComponent(props.postTitle)}\n  // })\n\n  const qandaChangeConditions = () => {\n    const query = qandaQuery.data;\n    const reducer = currentPost;\n    if (!query) return null;\n    if (!query.searchAnsweredQToPost) return null;\n    if (!reducer) return null;\n    if (reducer.qanda) return null;\n    return query.searchAnsweredQToPost;\n  }; // const postChangeConditions = () => {\n  //     const query = postQuery.data\n  //     const reducer = currentPost\n  //     if (!query) return null\n  //     if (!query.findPost) return null\n  //     if (reducer) {\n  //         if (reducer.title === query.findPost.title) return null\n  //     }\n  //     return query.findPost\n  // }\n\n\n  const qanda = qandaChangeConditions(); // const post = postChangeConditions()\n\n  useEffect(() => {\n    if (qanda) {\n      setCurrentPost(_objectSpread(_objectSpread({}, currentPost), {}, {\n        qanda\n      }));\n    } // if (post) {\n    //     setCurrentPost(post)\n    // }\n\n  }, [qanda, setCurrentPost, currentPost]);\n\n  if (!currentPost) {\n    return __jsx(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 16\n      }\n    });\n  }\n\n  let cleanedTime = new Date(Number(currentPost.time));\n  cleanedTime = cleanedTime.toString().split(' '); // cleanedTime = cleanedTime.slice(1,4).join(' ') + ' ' + cleanedTime[4].split(':').slice(0,2).join(':')\n\n  cleanedTime = cleanedTime.slice(1, 3).join(' ') + ', ' + cleanedTime[3];\n  let qandaList = currentPost.qanda ? currentPost.qanda.map(i => __jsx(PostQandA, {\n    qanda: i,\n    key: `QandA${i.question}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 68\n    }\n  })) : __jsx(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 122\n    }\n  });\n  qandaList = qandaList.length ? qandaList : __jsx(\"div\", {\n    className: ppStyle.qandaText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 48\n    }\n  }, \"no question and answer pairs yet\");\n  const skillsHTML = [];\n  const questionStyle = skillExpanded ? {\n    display: 'none'\n  } : {\n    display: 'block'\n  };\n\n  const handleNotification = async proposedContribution => {\n    if (!props.currentUser) {\n      triggerAlert('warning', `sign in$: must be signed in to perform this action`, props.setAlert, props.resetAlert);\n      return null;\n    }\n\n    if (!message.fields.value.length) {\n      triggerAlert('warning', `message$: message field is required`, props.setAlert, props.resetAlert);\n      return null;\n    }\n\n    const result = await makeNotification({\n      variables: {\n        userFromId: props.currentUser._id,\n        userToId: currentPost.user._id,\n        message: message.fields.value,\n        postId: currentPost._id,\n        proposedContribution\n      }\n    });\n\n    if (result) {\n      setSkillExpanded(null);\n      message.reset();\n      triggerAlert('success', `sent$: (check your answered notifications for the response) request has been sent to ${currentPost.user.username}`, props.setAlert, props.resetAlert);\n    }\n  };\n\n  for (const ins in currentPost.skillNames) {\n    const skillName = currentPost.skillNames[ins];\n    const skillFill = currentPost.skillFills[ins];\n    const skillCap = currentPost.skillCapacities[ins];\n    const messageStyle = skillExpanded === skillName ? {\n      display: 'block'\n    } : {\n      display: 'none'\n    };\n    const buttonToShown = skillExpanded === skillName ? __jsx(\"h4\", {\n      onClick: () => setSkillExpanded(null),\n      className: ppStyle.PPSButtonExit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, \"X\") : skillFill < skillCap ? __jsx(\"h4\", {\n      onClick: () => setSkillExpanded(skillName),\n      className: ppStyle.PPSButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }, \"join\") : __jsx(\"h4\", {\n      className: ppStyle.PPSButtonDisabled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }, \"join\");\n    const skillProposition = Array(currentPost.skillNames.length).fill(0);\n    skillProposition[ins] = 1;\n    skillsHTML.push(__jsx(\"div\", {\n      className: ppStyle.PPSSkill,\n      key: `PPSS${skillName}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: ppStyle.PPSDivision,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }), __jsx(\"p\", {\n      className: ppStyle.PPSSkillName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, skillName), __jsx(\"div\", {\n      className: ppStyle.PPSSkillSecondary,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: ppStyle.PPSSkillInfo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }, skillFill, \"/\", skillCap), buttonToShown), __jsx(\"div\", {\n      className: ppStyle.PPSSkillForm,\n      style: messageStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: ppStyle.PPSTitle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, __jsx(InputHeader, {\n      inputFor: \"PPS-message\",\n      info: false,\n      title: \"message\",\n      color: \"white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    })), __jsx(\"div\", {\n      className: ppStyle.PPSInputContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 21\n      }\n    }, __jsx(\"textarea\", _extends({\n      className: ppStyle.PPSInput,\n      id: \"PPS-message\"\n    }, message.fields, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 25\n      }\n    }))), __jsx(\"div\", {\n      className: ppStyle.PPCSubmitContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }, __jsx(\"h4\", {\n      onClick: () => handleNotification(skillProposition),\n      className: ppStyle.PPSBButton,\n      style: {\n        borderColor: currentPost.color\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 26\n      }\n    }, \"join\")))));\n  }\n\n  const handleQuestion = async () => {\n    if (!props.currentUser) {\n      triggerAlert('warning', `sign in$: must be signed in to perform this action`, props.setAlert, props.resetAlert);\n      return null;\n    }\n\n    if (!question.fields.value.length) {\n      triggerAlert('warning', `question$: question field is required`, props.setAlert, props.resetAlert);\n      return null;\n    }\n\n    const result = await askQuestion({\n      variables: {\n        userFromId: props.currentUser._id,\n        userToId: currentPost.user._id,\n        postId: currentPost._id,\n        question: question.fields.value\n      }\n    });\n\n    if (result) {\n      question.reset();\n      triggerAlert('success', `sent$: (check your answered notifications for the response) question has been sent to ${currentPost.user.username}`, props.setAlert, props.resetAlert);\n    }\n  };\n\n  const pallette = palletteGenerator(currentPost.color).colorPallette;\n  const teamHTML = currentPost.team ? currentPost.team.map(un => __jsx(Link, {\n    to: `/user/${un}`,\n    className: `${ppStyle.PPCUserContainer} neutralize-link`,\n    key: `PT${un}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, __jsx(\"img\", {\n    className: ppStyle.PPCUserIcon,\n    src: \"/svg/userB.svg\",\n    alt: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }\n  }), __jsx(\"p\", {\n    className: \"NM\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  }, un))) : null;\n\n  const HomeContent = () => {\n    if (props.home) {\n      return __jsx(\"div\", {\n        className: ppStyle.homeOptions,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 17\n        }\n      }, __jsx(Link, {\n        to: \"/browse/\",\n        className: `${ppStyle.homeOption} neutralize-link`,\n        style: {\n          backgroundColor: '#282828'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }\n      }, __jsx(\"img\", {\n        src: \"/svg/searchWW.svg\",\n        className: ppStyle.homeOptionIcon,\n        alt: \"search\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 25\n        }\n      }), __jsx(\"h3\", {\n        className: ppStyle.homeOptionText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 25\n        }\n      }, \"browse all\")), __jsx(Link, {\n        to: \"/post-form/\",\n        className: `${ppStyle.homeOption} neutralize-link`,\n        style: {\n          backgroundColor: 'rgb(52,166,95)'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }\n      }, __jsx(\"img\", {\n        src: \"/svg/plusW.svg\",\n        className: ppStyle.homeOptionIcon,\n        alt: \"add\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 25\n        }\n      }), __jsx(\"h3\", {\n        className: ppStyle.homeOptionText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 25\n        }\n      }, \"add project\")), __jsx(\"a\", {\n        href: \"https://discord.gg/v7vFc9U\",\n        className: `${ppStyle.homeOption} ${ppStyle.homeOptionHighlight} neutralize-link`,\n        style: {\n          backgroundColor: '#7289DA'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 21\n        }\n      }, __jsx(\"img\", {\n        src: \"/svg/websites/discord.svg\",\n        className: ppStyle.homeOptionIcon,\n        alt: \"Discord\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 25\n        }\n      }), __jsx(\"h3\", {\n        className: ppStyle.homeOptionText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 25\n        }\n      }, \"community discord\")));\n    } else {\n      return null;\n    }\n  };\n\n  const ModifiedDescription = () => {\n    const spacedDis = currentPost.description.split(' ');\n\n    for (const i in spacedDis) {\n      if (spacedDis[i].includes('https://')) {\n        spacedDis[i] = `<a href=\"${spacedDis[i]}\" class=\"p-link neutralize-link\">${spacedDis[i]}</a>`;\n      }\n\n      if (spacedDis[i].includes('http://')) {\n        spacedDis[i] = `<a href=\"${spacedDis[i]}\" class=\"p-link neutralize-link\">${spacedDis[i]}</a>`;\n      }\n    }\n\n    const finalDis = spacedDis.join(' ');\n    return __jsx(\"p\", {\n      className: ppStyle.PPCDescription,\n      dangerouslySetInnerHTML: {\n        __html: finalDis\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 16\n      }\n    });\n  };\n\n  const skillCap = currentPost.skillCapacities.reduce((n, t) => t + n, 0);\n  const skillFill = currentPost.skillFills.reduce((n, t) => t + n, 0);\n\n  const titleKeywords = () => {\n    let title = currentPost.title;\n    title = title.split(' ');\n    let keywords = title.map(w => {\n      if (w.slice(0, 1).toUpperCase() === w.slice(0, 1) && w.slice(0, 1).toLowerCase() === w.slice(0, 1)) return null;\n      if (w.slice(0, 1).toUpperCase() === w.slice(0, 1)) return w + ',';\n      return null;\n    });\n    keywords = keywords.length ? keywords.join(' ') : title[0] + ', ';\n    return keywords;\n  }; // <Helmet>\n  //     <title>{currentPost.title}</title>\n  //     <meta name=\"author\" content={currentPost.user.username} />\n  //     <meta name=\"description\" content={`Join the project, be part of \"${currentPost.title}\" team! So far ${skillFill} awesome people have joined, there are only ${skillCap - skillFill} slots left.`} />\n  //     <meta name=\"keywords\" content={`${titleKeywords()} build, team`} />\n  // </Helmet>\n\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"navbar-height\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: ppStyle.postPageContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: ppStyle.PPContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 17\n    }\n  }, __jsx(HomeContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 21\n    }\n  }), __jsx(\"h2\", {\n    className: ppStyle.PPCTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 21\n    }\n  }, currentPost.title), __jsx(\"div\", {\n    className: ppStyle.PPCSubHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    to: `/user/${currentPost.user.username}`,\n    className: `${ppStyle.PPCUserContainer} neutralize-link`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 25\n    }\n  }, __jsx(\"img\", {\n    className: ppStyle.PPCUserIcon,\n    src: \"/svg/userB.svg\",\n    alt: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 29\n    }\n  }), __jsx(\"p\", {\n    className: \"NM\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 29\n    }\n  }, currentPost.user.username)), __jsx(\"p\", {\n    className: ppStyle.PPCTime,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 25\n    }\n  }, cleanedTime)), __jsx(ModifiedDescription, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 21\n    }\n  }), __jsx(PostImages, {\n    imageLinks: currentPost.imageLinks,\n    color: currentPost.color,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 21\n    }\n  }), __jsx(PostLinks, {\n    referenceLinks: currentPost.referenceLinks,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 21\n    }\n  }), __jsx(\"h3\", {\n    className: ppStyle.PPCTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 21\n    }\n  }, \"Q and A\"), __jsx(\"div\", {\n    className: ppStyle.PPCAllQandaContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 21\n    }\n  }, qandaList), __jsx(\"h3\", {\n    className: ppStyle.PPCTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 21\n    }\n  }, \"team\"), __jsx(\"div\", {\n    className: ppStyle.teamInfo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 21\n    }\n  }, teamHTML.length, \" team members\"), __jsx(\"div\", {\n    className: ppStyle.PPCTeamContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 21\n    }\n  }, teamHTML)), __jsx(FormContainer, {\n    pallette: pallette,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: ppStyle.PPSFollowHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    onClick: () => handleFollow(),\n    className: ppStyle.PPSFollowHeader,\n    style: {\n      borderTop: '2px solid currentPost.color'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 25\n    }\n  }, __jsx(\"svg\", {\n    className: ppStyle.PPCUserIcon,\n    fill: currentPost.color,\n    viewBox: \"0 -28 512.00002 512\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 29\n    }\n  }, __jsx(\"path\", {\n    d: \"m471.382812 44.578125c-26.503906-28.746094-62.871093-44.578125-102.410156-44.578125-29.554687 0-56.621094 9.34375-80.449218 27.769531-12.023438 9.300781-22.917969 20.679688-32.523438 33.960938-9.601562-13.277344-20.5-24.660157-32.527344-33.960938-23.824218-18.425781-50.890625-27.769531-80.445312-27.769531-39.539063 0-75.910156 15.832031-102.414063 44.578125-26.1875 28.410156-40.613281 67.222656-40.613281 109.292969 0 43.300781 16.136719 82.9375 50.78125 124.742187 30.992188 37.394531 75.535156 75.355469 127.117188 119.3125 17.613281 15.011719 37.578124 32.027344 58.308593 50.152344 5.476563 4.796875 12.503907 7.4375 19.792969 7.4375 7.285156 0 14.316406-2.640625 19.785156-7.429687 20.730469-18.128907 40.707032-35.152344 58.328125-50.171876 51.574219-43.949218 96.117188-81.90625 127.109375-119.304687 34.644532-41.800781 50.777344-81.4375 50.777344-124.742187 0-42.066407-14.425781-80.878907-40.617188-109.289063zm0 0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 156\n    }\n  })), __jsx(\"p\", {\n    className: \"NM\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 29\n    }\n  }, \"follow\"))), skillsHTML, __jsx(\"div\", {\n    style: questionStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: ppStyle.PPSDivision,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 25\n    }\n  }), __jsx(\"div\", {\n    className: ppStyle.PPSTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 25\n    }\n  }, __jsx(InputHeader, {\n    inputFor: \"PPS-question\",\n    info: true,\n    title: \"question\",\n    color: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 29\n    }\n  }, __jsx(\"ul\", {\n    style: {\n      margin: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 33\n    }\n  }, __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 37\n    }\n  }, \"if answered it will be shown on post\")))), __jsx(\"div\", {\n    className: ppStyle.PPSInputContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 25\n    }\n  }, __jsx(\"textarea\", _extends({\n    className: ppStyle.PPSInput,\n    id: \"PPS-question\"\n  }, question.fields, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 29\n    }\n  }))), __jsx(\"div\", {\n    className: ppStyle.PPCSubmitContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 25\n    }\n  }, __jsx(\"h4\", {\n    onClick: () => handleQuestion(),\n    className: ppStyle.PPSButton,\n    style: {\n      borderColor: currentPost.color\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 29\n    }\n  }, \"ask\"))))));\n}, \"Fzx/zQEJrrY2EwN7EY9EL3qmjRY=\", false, function () {\n  return [useField, useField, useMutation, useMutation, useMutation, useQuery];\n})); // const mapStateToProps = (state) => {\n// \treturn {\n//         currentUser: state.currentUser,\n//         token: state.token\n// \t}\n// }\n// export default connect(\n//     mapStateToProps, \n//     { setAlert, resetAlert, setCurrentUserSP }\n// )(PostPage)\n\n_c2 = PostPage;\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.currentUser,\n    token: state.token,\n    alertNotif: state.alertNotif\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setAlert: bindActionCreators(setAlert, dispatch),\n    resetAlert: bindActionCreators(resetAlert, dispatch),\n    setToken: bindActionCreators(setToken, dispatch),\n    setCurrentUserSP: bindActionCreators(setCurrentUserSP, dispatch)\n  };\n};\n\nexport var __N_SSG = true;\nexport default connect(mapStateToProps, mapDispatchToProps)(PostPage);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"PostPage$withRouter\");\n$RefreshReg$(_c2, \"PostPage\");","map":{"version":3,"sources":["C:/Code/Projects/projectU/projectu/pages/post/[title].js"],"names":["React","useState","useEffect","connect","useQuery","useMutation","MAKE_NOTIFICATION","ASK_QUESTION","SAVE_POST","Q_AND_A_NOTIFS","Link","Loading","ppStyle","PostImages","PostLinks","PostQandA","InputHeader","FormContainer","setCurrentUserSP","setAlert","resetAlert","useField","triggerAlert","palletteGenerator","bindActionCreators","setToken","apollo","withRouter","PostPage","props","currentPost","setCurrentPost","skillExpanded","setSkillExpanded","question","message","onJoinError","e","includes","fields","value","length","onQuestionError","onFollowError","console","log","followMutation","onError","makeNotification","askQuestion","handleFollow","token","result","variables","user","currentUser","_id","postId","savedPosts","concat","qandaQuery","title","decodeURIComponent","postTitle","qandaChangeConditions","query","data","reducer","searchAnsweredQToPost","qanda","cleanedTime","Date","Number","time","toString","split","slice","join","qandaList","map","i","qandaText","skillsHTML","questionStyle","display","handleNotification","proposedContribution","userFromId","userToId","reset","username","ins","skillNames","skillName","skillFill","skillFills","skillCap","skillCapacities","messageStyle","buttonToShown","PPSButtonExit","PPSButton","PPSButtonDisabled","skillProposition","Array","fill","push","PPSSkill","PPSDivision","PPSSkillName","PPSSkillSecondary","PPSSkillInfo","PPSSkillForm","PPSTitle","PPSInputContainer","PPSInput","PPCSubmitContainer","PPSBButton","borderColor","color","handleQuestion","pallette","colorPallette","teamHTML","team","un","PPCUserContainer","PPCUserIcon","HomeContent","home","homeOptions","homeOption","backgroundColor","homeOptionIcon","homeOptionText","homeOptionHighlight","ModifiedDescription","spacedDis","description","finalDis","PPCDescription","__html","reduce","n","t","titleKeywords","keywords","w","toUpperCase","toLowerCase","postPageContainer","PPContent","PPCTitle","PPCSubHeader","PPCTime","imageLinks","referenceLinks","PPCAllQandaContainer","teamInfo","PPCTeamContainer","PPSFollowHeader","borderTop","margin","mapStateToProps","state","alertNotif","mapDispatchToProps","dispatch"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,qBAAtC;AACA,SAASC,iBAAT,EAA4BC,YAA5B,EAA0CC,SAA1C,QAA2D,6BAA3D;AACA,SAAqCC,cAArC,QAA2D,2BAA3D;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,OAAOC,OAAP,MAAoB,2CAApB,C,CACA;;AACA,OAAOC,UAAP,MAAuB,sCAAvB;AACA,OAAOC,SAAP,MAAsB,qCAAtB;AACA,OAAOC,SAAP,MAAsB,qCAAtB;AACA,OAAOC,WAAP,MAAwB,yCAAxB;AACA,OAAOC,aAAP,MAA0B,2CAA1B,C,CACA;AACA;AACA;;AACA,SAASC,gBAAT,QAAiC,kCAAjC;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,iCAArC;AACA,SAASC,QAAT,EAAmBC,YAAnB,EAAiCC,iBAAjC,QAA0D,+BAA1D;AACA,SAAQC,kBAAR,QAAiC,OAAjC;AACA,SAAQC,QAAR,QAAuB,4BAAvB;AACA,OAAOC,MAAP,MAAmC,kBAAnC;AACA,SAAQC,UAAR,QAAyB,aAAzB;AAEA,MAAMC,QAAQ,GAAGD,UAAU,SAAEE,KAAD,IAAW;AAAA;;AACnC,QAAM;AAAA,OAACC,WAAD;AAAA,OAAcC;AAAd,MAAgC9B,QAAQ,EAA9C;AACA,QAAM;AAAA,OAAC+B,aAAD;AAAA,OAAgBC;AAAhB,MAAoChC,QAAQ,CAAC,IAAD,CAAlD;AACA,QAAMiC,QAAQ,GAAGb,QAAQ,CAAC,MAAD,CAAzB;AACA,QAAMc,OAAO,GAAGd,QAAQ,CAAC,MAAD,CAAxB;;AACA,QAAMe,WAAW,GAAIC,CAAD,IAAO;AACvB,QAAIA,CAAC,CAACF,OAAF,CAAUG,QAAV,CAAmB,2CAAnB,CAAJ,EAAqE;AACjEhB,MAAAA,YAAY,CAAC,SAAD,EAAa,wBAAuBa,OAAO,CAACI,MAAR,CAAeC,KAAf,CAAqBC,MAAO,qDAAhE,EAAsHZ,KAAK,CAACV,QAA5H,EAAsIU,KAAK,CAACT,UAA5I,CAAZ;AACH;AACJ,GAJD;;AAKA,QAAMsB,eAAe,GAAIL,CAAD,IAAO;AAC3B,QAAIA,CAAC,CAACF,OAAF,CAAUG,QAAV,CAAmB,2CAAnB,CAAJ,EAAqE;AACjEhB,MAAAA,YAAY,CAAC,SAAD,EAAa,0BAAyBY,QAAQ,CAACK,MAAT,CAAgBC,KAAhB,CAAsBC,MAAO,qDAAnE,EAAyHZ,KAAK,CAACV,QAA/H,EAAyIU,KAAK,CAACT,UAA/I,CAAZ;AACH;AACJ,GAJD;;AAKA,QAAMuB,aAAa,GAAIN,CAAD,IAAO;AACzBO,IAAAA,OAAO,CAACC,GAAR,CAAYR,CAAZ;AACH,GAFD;;AAIA,QAAM,CAACS,cAAD,IAAmBzC,WAAW,CAACG,SAAD,EAAY;AAC5CuC,IAAAA,OAAO,EAAEJ;AADmC,GAAZ,CAApC;AAGA,QAAM,CAACK,gBAAD,IAAqB3C,WAAW,CAACC,iBAAD,EAAoB;AACtDyC,IAAAA,OAAO,EAAEX;AAD6C,GAApB,CAAtC;AAGA,QAAM,CAACa,WAAD,IAAgB5C,WAAW,CAACE,YAAD,EAAe;AAC5CwC,IAAAA,OAAO,EAAEL;AADmC,GAAf,CAAjC;;AAIA,QAAMQ,YAAY,GAAG,YAAY;AAC7B,QAAI,CAACrB,KAAK,CAACsB,KAAX,EAAkB;AACd7B,MAAAA,YAAY,CAAC,SAAD,EAAY,oDAAZ,EAAkEO,KAAK,CAACV,QAAxE,EAAkFU,KAAK,CAACT,UAAxF,CAAZ;AACH;;AACD,UAAMgC,MAAM,GAAG,MAAMN,cAAc,CAAC;AAChCO,MAAAA,SAAS,EAAE;AACPC,QAAAA,IAAI,EAAEzB,KAAK,CAAC0B,WAAN,CAAkBC,GADjB;AAEPC,QAAAA,MAAM,EAAE3B,WAAW,CAAC0B;AAFb;AADqB,KAAD,CAAnC;;AAOA,QAAIJ,MAAJ,EAAY;AACRvB,MAAAA,KAAK,CAACX,gBAAN,CAAuBW,KAAK,CAAC0B,WAAN,CAAkBG,UAAlB,CAA6BC,MAA7B,CAAoC7B,WAApC,CAAvB;AACAR,MAAAA,YAAY,CAAC,SAAD,EAAY,4CAAZ,EAA0DO,KAAK,CAACV,QAAhE,EAA0EU,KAAK,CAACT,UAAhF,CAAZ;AACH;AACJ,GAfD;;AAiBA,QAAMwC,UAAU,GAAGxD,QAAQ,CAACK,cAAD,EAAiB;AACxC4C,IAAAA,SAAS,EAAE;AAACQ,MAAAA,KAAK,EAAEC,kBAAkB,CAACjC,KAAK,CAACkC,SAAP;AAA1B;AAD6B,GAAjB,CAA3B,CA9CmC,CAiDnC;AACA;AACA;;AACA,QAAMC,qBAAqB,GAAG,MAAM;AAChC,UAAMC,KAAK,GAAGL,UAAU,CAACM,IAAzB;AACA,UAAMC,OAAO,GAAGrC,WAAhB;AACA,QAAI,CAACmC,KAAL,EAAY,OAAO,IAAP;AACZ,QAAI,CAACA,KAAK,CAACG,qBAAX,EAAkC,OAAO,IAAP;AAClC,QAAI,CAACD,OAAL,EAAc,OAAO,IAAP;AACd,QAAIA,OAAO,CAACE,KAAZ,EAAmB,OAAO,IAAP;AACnB,WAAOJ,KAAK,CAACG,qBAAb;AACH,GARD,CApDmC,CA6DnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,QAAMC,KAAK,GAAGL,qBAAqB,EAAnC,CAvEmC,CAwEnC;;AACA9D,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAImE,KAAJ,EAAW;AACPtC,MAAAA,cAAc,iCAAKD,WAAL;AAAkBuC,QAAAA;AAAlB,SAAd;AACH,KAHW,CAIZ;AACA;AACA;;AACH,GAPQ,EAON,CAACA,KAAD,EAAQtC,cAAR,EAAwBD,WAAxB,CAPM,CAAT;;AAQA,MAAI,CAACA,WAAL,EAAkB;AACd,WAAO,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACH;;AAED,MAAIwC,WAAW,GAAG,IAAIC,IAAJ,CAASC,MAAM,CAAC1C,WAAW,CAAC2C,IAAb,CAAf,CAAlB;AACAH,EAAAA,WAAW,GAAGA,WAAW,CAACI,QAAZ,GAAuBC,KAAvB,CAA6B,GAA7B,CAAd,CAtFmC,CAuFnC;;AACAL,EAAAA,WAAW,GAAGA,WAAW,CAACM,KAAZ,CAAkB,CAAlB,EAAoB,CAApB,EAAuBC,IAAvB,CAA4B,GAA5B,IAAmC,IAAnC,GAA0CP,WAAW,CAAC,CAAD,CAAnE;AAEA,MAAIQ,SAAS,GAAGhD,WAAW,CAACuC,KAAZ,GAAoBvC,WAAW,CAACuC,KAAZ,CAAkBU,GAAlB,CAAsBC,CAAC,IAAI,MAAC,SAAD;AAAW,IAAA,KAAK,EAAEA,CAAlB;AAAqB,IAAA,GAAG,EAAG,QAAOA,CAAC,CAAC9C,QAAS,EAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA3B,CAApB,GAAqG,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAArH;AACA4C,EAAAA,SAAS,GAAGA,SAAS,CAACrC,MAAV,GAAmBqC,SAAnB,GAA+B;AAAK,IAAA,SAAS,EAAElE,OAAO,CAACqE,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAA3C;AACA,QAAMC,UAAU,GAAG,EAAnB;AACA,QAAMC,aAAa,GAAGnD,aAAa,GAAG;AAACoD,IAAAA,OAAO,EAAE;AAAV,GAAH,GAAuB;AAACA,IAAAA,OAAO,EAAE;AAAV,GAA1D;;AACA,QAAMC,kBAAkB,GAAG,MAAOC,oBAAP,IAAgC;AACvD,QAAI,CAACzD,KAAK,CAAC0B,WAAX,EAAwB;AACpBjC,MAAAA,YAAY,CAAC,SAAD,EAAa,oDAAb,EAAkEO,KAAK,CAACV,QAAxE,EAAkFU,KAAK,CAACT,UAAxF,CAAZ;AACA,aAAO,IAAP;AACH;;AACD,QAAI,CAACe,OAAO,CAACI,MAAR,CAAeC,KAAf,CAAqBC,MAA1B,EAAkC;AAC9BnB,MAAAA,YAAY,CAAC,SAAD,EAAa,qCAAb,EAAmDO,KAAK,CAACV,QAAzD,EAAmEU,KAAK,CAACT,UAAzE,CAAZ;AACA,aAAO,IAAP;AACH;;AACD,UAAMgC,MAAM,GAAG,MAAMJ,gBAAgB,CAAC;AAClCK,MAAAA,SAAS,EAAE;AACPkC,QAAAA,UAAU,EAAE1D,KAAK,CAAC0B,WAAN,CAAkBC,GADvB;AAEPgC,QAAAA,QAAQ,EAAE1D,WAAW,CAACwB,IAAZ,CAAiBE,GAFpB;AAGPrB,QAAAA,OAAO,EAAEA,OAAO,CAACI,MAAR,CAAeC,KAHjB;AAIPiB,QAAAA,MAAM,EAAE3B,WAAW,CAAC0B,GAJb;AAKP8B,QAAAA;AALO;AADuB,KAAD,CAArC;;AASA,QAAIlC,MAAJ,EAAY;AACRnB,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAE,MAAAA,OAAO,CAACsD,KAAR;AACAnE,MAAAA,YAAY,CAAC,SAAD,EAAa,wFAAuFQ,WAAW,CAACwB,IAAZ,CAAiBoC,QAAS,EAA9H,EAAiI7D,KAAK,CAACV,QAAvI,EAAiJU,KAAK,CAACT,UAAvJ,CAAZ;AACH;AACJ,GAvBD;;AAwBA,OAAK,MAAMuE,GAAX,IAAkB7D,WAAW,CAAC8D,UAA9B,EAA0C;AACtC,UAAMC,SAAS,GAAG/D,WAAW,CAAC8D,UAAZ,CAAuBD,GAAvB,CAAlB;AACA,UAAMG,SAAS,GAAGhE,WAAW,CAACiE,UAAZ,CAAuBJ,GAAvB,CAAlB;AACA,UAAMK,QAAQ,GAAGlE,WAAW,CAACmE,eAAZ,CAA4BN,GAA5B,CAAjB;AACA,UAAMO,YAAY,GAAGlE,aAAa,KAAK6D,SAAlB,GAA8B;AAACT,MAAAA,OAAO,EAAE;AAAV,KAA9B,GAAmD;AAACA,MAAAA,OAAO,EAAE;AAAV,KAAxE;AACA,UAAMe,aAAa,GAAGnE,aAAa,KAAK6D,SAAlB,GAClB;AAAI,MAAA,OAAO,EAAE,MAAM5D,gBAAgB,CAAC,IAAD,CAAnC;AAA2C,MAAA,SAAS,EAAErB,OAAO,CAACwF,aAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADkB,GAGlBN,SAAS,GAAGE,QAAZ,GACI;AAAI,MAAA,OAAO,EAAE,MAAM/D,gBAAgB,CAAC4D,SAAD,CAAnC;AAAgD,MAAA,SAAS,EAAEjF,OAAO,CAACyF,SAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,GAGI;AAAI,MAAA,SAAS,EAAEzF,OAAO,CAAC0F,iBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANR;AAQA,UAAMC,gBAAgB,GAAGC,KAAK,CAAC1E,WAAW,CAAC8D,UAAZ,CAAuBnD,MAAxB,CAAL,CAAqCgE,IAArC,CAA0C,CAA1C,CAAzB;AACAF,IAAAA,gBAAgB,CAACZ,GAAD,CAAhB,GAAwB,CAAxB;AACAT,IAAAA,UAAU,CAACwB,IAAX,CACI;AAAK,MAAA,SAAS,EAAE9F,OAAO,CAAC+F,QAAxB;AAAkC,MAAA,GAAG,EAAG,OAAMd,SAAU,EAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAEjF,OAAO,CAACgG,WAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAG,MAAA,SAAS,EAAEhG,OAAO,CAACiG,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqChB,SAArC,CAFJ,EAGI;AAAK,MAAA,SAAS,EAAEjF,OAAO,CAACkG,iBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,SAAS,EAAElG,OAAO,CAACmG,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqCjB,SAArC,OAAiDE,QAAjD,CADJ,EAEKG,aAFL,CAHJ,EAOI;AAAK,MAAA,SAAS,EAAEvF,OAAO,CAACoG,YAAxB;AAAsC,MAAA,KAAK,EAAEd,YAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAEtF,OAAO,CAACqG,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,WAAD;AAAa,MAAA,QAAQ,EAAC,aAAtB;AAAoC,MAAA,IAAI,EAAE,KAA1C;AAAiD,MAAA,KAAK,EAAC,SAAvD;AAAiE,MAAA,KAAK,EAAC,OAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,EAII;AAAK,MAAA,SAAS,EAAErG,OAAO,CAACsG,iBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAU,MAAA,SAAS,EAAEtG,OAAO,CAACuG,QAA7B;AAAuC,MAAA,EAAE,EAAC;AAA1C,OAA4DhF,OAAO,CAACI,MAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADJ,CAJJ,EAOI;AAAK,MAAA,SAAS,EAAE3B,OAAO,CAACwG,kBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK;AAAI,MAAA,OAAO,EAAE,MAAM/B,kBAAkB,CAACkB,gBAAD,CAArC;AAAyD,MAAA,SAAS,EAAE3F,OAAO,CAACyG,UAA5E;AAAwF,MAAA,KAAK,EAAE;AAACC,QAAAA,WAAW,EAAExF,WAAW,CAACyF;AAA1B,OAA/F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADL,CAPJ,CAPJ,CADJ;AAqBH;;AAED,QAAMC,cAAc,GAAG,YAAY;AAC/B,QAAI,CAAC3F,KAAK,CAAC0B,WAAX,EAAwB;AACpBjC,MAAAA,YAAY,CAAC,SAAD,EAAa,oDAAb,EAAkEO,KAAK,CAACV,QAAxE,EAAkFU,KAAK,CAACT,UAAxF,CAAZ;AACA,aAAO,IAAP;AACH;;AACD,QAAI,CAACc,QAAQ,CAACK,MAAT,CAAgBC,KAAhB,CAAsBC,MAA3B,EAAmC;AAC/BnB,MAAAA,YAAY,CAAC,SAAD,EAAa,uCAAb,EAAqDO,KAAK,CAACV,QAA3D,EAAqEU,KAAK,CAACT,UAA3E,CAAZ;AACA,aAAO,IAAP;AACH;;AACD,UAAMgC,MAAM,GAAG,MAAMH,WAAW,CAAC;AAC7BI,MAAAA,SAAS,EAAE;AACPkC,QAAAA,UAAU,EAAE1D,KAAK,CAAC0B,WAAN,CAAkBC,GADvB;AAEPgC,QAAAA,QAAQ,EAAE1D,WAAW,CAACwB,IAAZ,CAAiBE,GAFpB;AAGPC,QAAAA,MAAM,EAAE3B,WAAW,CAAC0B,GAHb;AAIPtB,QAAAA,QAAQ,EAAEA,QAAQ,CAACK,MAAT,CAAgBC;AAJnB;AADkB,KAAD,CAAhC;;AAQA,QAAIY,MAAJ,EAAY;AACRlB,MAAAA,QAAQ,CAACuD,KAAT;AACAnE,MAAAA,YAAY,CAAC,SAAD,EAAa,yFAAwFQ,WAAW,CAACwB,IAAZ,CAAiBoC,QAAS,EAA/H,EAAkI7D,KAAK,CAACV,QAAxI,EAAkJU,KAAK,CAACT,UAAxJ,CAAZ;AACH;AACJ,GArBD;;AAsBA,QAAMqG,QAAQ,GAAGlG,iBAAiB,CAACO,WAAW,CAACyF,KAAb,CAAjB,CAAqCG,aAAtD;AAEA,QAAMC,QAAQ,GAAG7F,WAAW,CAAC8F,IAAZ,GAAmB9F,WAAW,CAAC8F,IAAZ,CAAiB7C,GAAjB,CAAqB8C,EAAE,IACvD,MAAC,IAAD;AAAM,IAAA,EAAE,EAAG,SAAQA,EAAG,EAAtB;AAAyB,IAAA,SAAS,EAAG,GAAEjH,OAAO,CAACkH,gBAAiB,kBAAhE;AAAmF,IAAA,GAAG,EAAG,KAAID,EAAG,EAAhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAEjH,OAAO,CAACmH,WAAxB;AAAqC,IAAA,GAAG,EAAC,gBAAzC;AAA0D,IAAA,GAAG,EAAC,MAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAG,IAAA,SAAS,EAAC,IAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmBF,EAAnB,CAFJ,CADgC,CAAnB,GAMd,IANH;;AAQA,QAAMG,WAAW,GAAG,MAAM;AACtB,QAAInG,KAAK,CAACoG,IAAV,EAAgB;AACZ,aACI;AAAK,QAAA,SAAS,EAAErH,OAAO,CAACsH,WAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,MAAC,IAAD;AAAM,QAAA,EAAE,EAAC,UAAT;AAAoB,QAAA,SAAS,EAAG,GAAEtH,OAAO,CAACuH,UAAW,kBAArD;AAAwE,QAAA,KAAK,EAAE;AAACC,UAAAA,eAAe,EAAE;AAAlB,SAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,GAAG,EAAC,mBAAT;AAA6B,QAAA,SAAS,EAAExH,OAAO,CAACyH,cAAhD;AAAgE,QAAA,GAAG,EAAC,QAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI;AAAI,QAAA,SAAS,EAAEzH,OAAO,CAAC0H,cAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ,CADJ,EAKI,MAAC,IAAD;AAAM,QAAA,EAAE,EAAC,aAAT;AAAuB,QAAA,SAAS,EAAG,GAAE1H,OAAO,CAACuH,UAAW,kBAAxD;AAA2E,QAAA,KAAK,EAAE;AAACC,UAAAA,eAAe,EAAE;AAAlB,SAAlF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,GAAG,EAAC,gBAAT;AAA0B,QAAA,SAAS,EAAExH,OAAO,CAACyH,cAA7C;AAA6D,QAAA,GAAG,EAAC,KAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI;AAAI,QAAA,SAAS,EAAEzH,OAAO,CAAC0H,cAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAFJ,CALJ,EASI;AAAG,QAAA,IAAI,EAAC,4BAAR;AAAqC,QAAA,SAAS,EAAG,GAAE1H,OAAO,CAACuH,UAAW,IAAGvH,OAAO,CAAC2H,mBAAoB,kBAArG;AAAwH,QAAA,KAAK,EAAE;AAACH,UAAAA,eAAe,EAAE;AAAlB,SAA/H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,GAAG,EAAC,2BAAT;AAAqC,QAAA,SAAS,EAAExH,OAAO,CAACyH,cAAxD;AAAwE,QAAA,GAAG,EAAC,SAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI;AAAI,QAAA,SAAS,EAAEzH,OAAO,CAAC0H,cAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAFJ,CATJ,CADJ;AAgBH,KAjBD,MAkBK;AACD,aAAO,IAAP;AACH;AACJ,GAtBD;;AAwBA,QAAME,mBAAmB,GAAG,MAAM;AAC9B,UAAMC,SAAS,GAAG3G,WAAW,CAAC4G,WAAZ,CAAwB/D,KAAxB,CAA8B,GAA9B,CAAlB;;AACA,SAAK,MAAMK,CAAX,IAAgByD,SAAhB,EAA2B;AACvB,UAAIA,SAAS,CAACzD,CAAD,CAAT,CAAa1C,QAAb,CAAsB,UAAtB,CAAJ,EAAuC;AACnCmG,QAAAA,SAAS,CAACzD,CAAD,CAAT,GAAgB,YAAWyD,SAAS,CAACzD,CAAD,CAAI,oCAAmCyD,SAAS,CAACzD,CAAD,CAAI,MAAxF;AACH;;AACD,UAAIyD,SAAS,CAACzD,CAAD,CAAT,CAAa1C,QAAb,CAAsB,SAAtB,CAAJ,EAAsC;AAClCmG,QAAAA,SAAS,CAACzD,CAAD,CAAT,GAAgB,YAAWyD,SAAS,CAACzD,CAAD,CAAI,oCAAmCyD,SAAS,CAACzD,CAAD,CAAI,MAAxF;AACH;AACJ;;AACD,UAAM2D,QAAQ,GAAGF,SAAS,CAAC5D,IAAV,CAAe,GAAf,CAAjB;AACA,WAAO;AAAG,MAAA,SAAS,EAAEjE,OAAO,CAACgI,cAAtB;AAAsC,MAAA,uBAAuB,EAAE;AAACC,QAAAA,MAAM,EAAEF;AAAT,OAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACH,GAZD;;AAaA,QAAM3C,QAAQ,GAAGlE,WAAW,CAACmE,eAAZ,CAA4B6C,MAA5B,CAAmC,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,GAAGD,CAAjD,EAAoD,CAApD,CAAjB;AACA,QAAMjD,SAAS,GAAGhE,WAAW,CAACiE,UAAZ,CAAuB+C,MAAvB,CAA8B,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,GAAGD,CAA5C,EAA+C,CAA/C,CAAlB;;AACA,QAAME,aAAa,GAAG,MAAM;AACxB,QAAIpF,KAAK,GAAG/B,WAAW,CAAC+B,KAAxB;AACAA,IAAAA,KAAK,GAAGA,KAAK,CAACc,KAAN,CAAY,GAAZ,CAAR;AACA,QAAIuE,QAAQ,GAAGrF,KAAK,CAACkB,GAAN,CAAUoE,CAAC,IAAI;AAC1B,UAAIA,CAAC,CAACvE,KAAF,CAAQ,CAAR,EAAW,CAAX,EAAcwE,WAAd,OAAgCD,CAAC,CAACvE,KAAF,CAAQ,CAAR,EAAW,CAAX,CAAhC,IAAiDuE,CAAC,CAACvE,KAAF,CAAQ,CAAR,EAAW,CAAX,EAAcyE,WAAd,OAAgCF,CAAC,CAACvE,KAAF,CAAQ,CAAR,EAAW,CAAX,CAArF,EAAoG,OAAO,IAAP;AACpG,UAAIuE,CAAC,CAACvE,KAAF,CAAQ,CAAR,EAAW,CAAX,EAAcwE,WAAd,OAAgCD,CAAC,CAACvE,KAAF,CAAQ,CAAR,EAAW,CAAX,CAApC,EAAmD,OAAOuE,CAAC,GAAG,GAAX;AACnD,aAAO,IAAP;AACH,KAJc,CAAf;AAKAD,IAAAA,QAAQ,GAAGA,QAAQ,CAACzG,MAAT,GAAkByG,QAAQ,CAACrE,IAAT,CAAc,GAAd,CAAlB,GAAuChB,KAAK,CAAC,CAAD,CAAL,GAAW,IAA7D;AAEA,WAAOqF,QAAP;AACH,GAXD,CAnOmC,CAgPnC;AACA;AACA;AACA;AACA;AACA;;;AACA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAK,IAAA,SAAS,EAAEtI,OAAO,CAAC0I,iBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAE1I,OAAO,CAAC2I,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAI,IAAA,SAAS,EAAE3I,OAAO,CAAC4I,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAkC1H,WAAW,CAAC+B,KAA9C,CAFJ,EAGI;AAAK,IAAA,SAAS,EAAEjD,OAAO,CAAC6I,YAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,EAAE,EAAG,SAAQ3H,WAAW,CAACwB,IAAZ,CAAiBoC,QAAS,EAA5C;AAA+C,IAAA,SAAS,EAAG,GAAE9E,OAAO,CAACkH,gBAAiB,kBAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAElH,OAAO,CAACmH,WAAxB;AAAqC,IAAA,GAAG,EAAC,gBAAzC;AAA0D,IAAA,GAAG,EAAC,MAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAG,IAAA,SAAS,EAAC,IAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmBjG,WAAW,CAACwB,IAAZ,CAAiBoC,QAApC,CAFJ,CADJ,EAKI;AAAG,IAAA,SAAS,EAAE9E,OAAO,CAAC8I,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAgCpF,WAAhC,CALJ,CAHJ,EAUI,MAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,EAWI,MAAC,UAAD;AAAY,IAAA,UAAU,EAAExC,WAAW,CAAC6H,UAApC;AAAgD,IAAA,KAAK,EAAE7H,WAAW,CAACyF,KAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXJ,EAYI,MAAC,SAAD;AAAW,IAAA,cAAc,EAAEzF,WAAW,CAAC8H,cAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZJ,EAaI;AAAI,IAAA,SAAS,EAAEhJ,OAAO,CAAC4I,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAbJ,EAcI;AAAK,IAAA,SAAS,EAAE5I,OAAO,CAACiJ,oBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK/E,SADL,CAdJ,EAiBI;AAAI,IAAA,SAAS,EAAElE,OAAO,CAAC4I,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAjBJ,EAkBI;AAAK,IAAA,SAAS,EAAE5I,OAAO,CAACkJ,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmCnC,QAAQ,CAAClF,MAA5C,kBAlBJ,EAmBI;AAAK,IAAA,SAAS,EAAE7B,OAAO,CAACmJ,gBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKpC,QADL,CAnBJ,CADJ,EAwBI,MAAC,aAAD;AAAe,IAAA,QAAQ,EAAEF,QAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAM,IAAA,SAAS,EAAE7G,OAAO,CAACoJ,eAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,OAAO,EAAE,MAAM9G,YAAY,EAAhC;AAAoC,IAAA,SAAS,EAAEtC,OAAO,CAACoJ,eAAvD;AAAwE,IAAA,KAAK,EAAE;AAACC,MAAAA,SAAS,EAAE;AAAZ,KAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAErJ,OAAO,CAACmH,WAAxB;AAAqC,IAAA,IAAI,EAAEjG,WAAW,CAACyF,KAAvD;AAA8D,IAAA,OAAO,EAAC,qBAAtE;AAA4F,IAAA,KAAK,EAAC,4BAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+H;AAAM,IAAA,CAAC,EAAC,i6BAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA/H,CADJ,EAEI;AAAG,IAAA,SAAS,EAAC,IAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,CADJ,CADJ,EAOKrC,UAPL,EAQI;AAAK,IAAA,KAAK,EAAEC,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAEvE,OAAO,CAACgG,WAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAK,IAAA,SAAS,EAAEhG,OAAO,CAACqG,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,WAAD;AAAa,IAAA,QAAQ,EAAC,cAAtB;AAAqC,IAAA,IAAI,EAAE,IAA3C;AAAiD,IAAA,KAAK,EAAC,UAAvD;AAAkE,IAAA,KAAK,EAAC,OAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAI,IAAA,KAAK,EAAE;AAACiD,MAAAA,MAAM,EAAE;AAAT,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CADJ,CADJ,CADJ,CAFJ,EASI;AAAK,IAAA,SAAS,EAAEtJ,OAAO,CAACsG,iBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAU,IAAA,SAAS,EAAEtG,OAAO,CAACuG,QAA7B;AAAuC,IAAA,EAAE,EAAC;AAA1C,KAA6DjF,QAAQ,CAACK,MAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADJ,CATJ,EAYI;AAAK,IAAA,SAAS,EAAE3B,OAAO,CAACwG,kBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAI,IAAA,OAAO,EAAE,MAAMI,cAAc,EAAjC;AAAqC,IAAA,SAAS,EAAE5G,OAAO,CAACyF,SAAxD;AAAmE,IAAA,KAAK,EAAE;AAACiB,MAAAA,WAAW,EAAExF,WAAW,CAACyF;AAA1B,KAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADJ,CAZJ,CARJ,CAxBJ,CAFJ,CADJ;AAuDH,CA7S0B;AAAA,UAGNlG,QAHM,EAIPA,QAJO,EAmBEhB,WAnBF,EAsBIA,WAtBJ,EAyBDA,WAzBC,EA8CJD,QA9CI;AAAA,GAA3B,C,CA+SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;MAxTMwB,Q;;AAiVN,MAAMuI,eAAe,GAAIC,KAAD,IAAW;AAClC,SAAO;AACA7G,IAAAA,WAAW,EAAE6G,KAAK,CAAC7G,WADnB;AAEAJ,IAAAA,KAAK,EAAEiH,KAAK,CAACjH,KAFb;AAGAkH,IAAAA,UAAU,EAAED,KAAK,CAACC;AAHlB,GAAP;AAKA,CAND;;AAOA,MAAMC,kBAAkB,GAAIC,QAAD,IAAc;AACrC,SAAO;AACHpJ,IAAAA,QAAQ,EAAEK,kBAAkB,CAACL,QAAD,EAAWoJ,QAAX,CADzB;AAEHnJ,IAAAA,UAAU,EAAEI,kBAAkB,CAACJ,UAAD,EAAamJ,QAAb,CAF3B;AAGH9I,IAAAA,QAAQ,EAAED,kBAAkB,CAACC,QAAD,EAAW8I,QAAX,CAHzB;AAIHrJ,IAAAA,gBAAgB,EAAEM,kBAAkB,CAACN,gBAAD,EAAmBqJ,QAAnB;AAJjC,GAAP;AAMH,CAPD;;;AASA,eAAepK,OAAO,CAClBgK,eADkB,EAElBG,kBAFkB,CAAP,CAGb1I,QAHa,CAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { useQuery, useMutation } from '@apollo/react-hooks'\r\nimport { MAKE_NOTIFICATION, ASK_QUESTION, SAVE_POST } from '../../src/schemas/mutations'\r\nimport { GET_POST_TITLES, FIND_POST, Q_AND_A_NOTIFS } from '../../src/schemas/queries'\r\nimport Link from 'next/link'\r\nimport Loading from '../../components/Loading'\r\nimport ppStyle from '../../styles/pages/newPostPage.module.css'\r\n// import userIcon from '../../static/svg/userB.svg'\r\nimport PostImages from '../../components/postPage/PostImages'\r\nimport PostLinks from '../../components/postPage/PostLinks'\r\nimport PostQandA from '../../components/postPage/PostQandA'\r\nimport InputHeader from '../../components/text-field/InputHeader'\r\nimport FormContainer from '../../components/text-field/FormContainer'\r\n// import plusIcon from '../../static/svg/plusW.svg'\r\n// import discordIcon from '../../static/svg/websites/discord.svg'\r\n// import searchIcon from '../../static/svg/searchWW.svg'\r\nimport { setCurrentUserSP } from '../../redux/reducers/currentUser'\r\nimport { setAlert, resetAlert } from '../../redux/reducers/alertNotif'\r\nimport { useField, triggerAlert, palletteGenerator } from '../../src/functions/functions'\r\nimport {bindActionCreators} from 'redux'\r\nimport {setToken} from '../../redux/reducers/token'\r\nimport apollo, {apolloClient} from '../../lib/apollo'\r\nimport {withRouter} from 'next/router'\r\n\r\nconst PostPage = withRouter((props) => {\r\n    const [currentPost, setCurrentPost] = useState()\r\n    const [skillExpanded, setSkillExpanded] = useState(null)\r\n    const question = useField('text')\r\n    const message = useField('text')\r\n    const onJoinError = (e) => {\r\n        if (e.message.includes('is longer than the maximum allowed length')) {\r\n            triggerAlert('warning', `message$: message of ${message.fields.value.length} characters exceeded the maximum of 800 characters.`, props.setAlert, props.resetAlert)\r\n        }\r\n    }\r\n    const onQuestionError = (e) => {\r\n        if (e.message.includes('is longer than the maximum allowed length')) {\r\n            triggerAlert('warning', `question$: question of ${question.fields.value.length} characters exceeded the maximum of 800 characters.`, props.setAlert, props.resetAlert)\r\n        }\r\n    }\r\n    const onFollowError = (e) => {\r\n        console.log(e)\r\n    }\r\n\r\n    const [followMutation] = useMutation(SAVE_POST, {\r\n        onError: onFollowError\r\n    })\r\n    const [makeNotification] = useMutation(MAKE_NOTIFICATION, {\r\n        onError: onJoinError\r\n    })\r\n    const [askQuestion] = useMutation(ASK_QUESTION, {\r\n        onError: onQuestionError\r\n    })\r\n\r\n    const handleFollow = async () => {\r\n        if (!props.token) {\r\n            triggerAlert('warning', 'sign in$: must be signed in to perform this action', props.setAlert, props.resetAlert)\r\n        }\r\n        const result = await followMutation({\r\n            variables: {\r\n                user: props.currentUser._id,\r\n                postId: currentPost._id\r\n            }\r\n        })\r\n\r\n        if (result) {\r\n            props.setCurrentUserSP(props.currentUser.savedPosts.concat(currentPost))\r\n            triggerAlert('success', 'followed$: you are now following this post', props.setAlert, props.resetAlert)\r\n        }\r\n    }\r\n    \r\n    const qandaQuery = useQuery(Q_AND_A_NOTIFS, {\r\n        variables: {title: decodeURIComponent(props.postTitle)}\r\n    })\r\n    // const postQuery = useQuery(FIND_POST, {\r\n    //     variables: {title: decodeURIComponent(props.postTitle)}\r\n    // })\r\n    const qandaChangeConditions = () => {\r\n        const query = qandaQuery.data\r\n        const reducer = currentPost\r\n        if (!query) return null\r\n        if (!query.searchAnsweredQToPost) return null\r\n        if (!reducer) return null\r\n        if (reducer.qanda) return null\r\n        return query.searchAnsweredQToPost\r\n    }\r\n    // const postChangeConditions = () => {\r\n    //     const query = postQuery.data\r\n    //     const reducer = currentPost\r\n    //     if (!query) return null\r\n    //     if (!query.findPost) return null\r\n    //     if (reducer) {\r\n    //         if (reducer.title === query.findPost.title) return null\r\n    //     }\r\n    //     return query.findPost\r\n    // }\r\n    const qanda = qandaChangeConditions()\r\n    // const post = postChangeConditions()\r\n    useEffect(() => {\r\n        if (qanda) {\r\n            setCurrentPost({...currentPost, qanda})\r\n        }\r\n        // if (post) {\r\n        //     setCurrentPost(post)\r\n        // }\r\n    }, [qanda, setCurrentPost, currentPost])\r\n    if (!currentPost) {\r\n        return <Loading />\r\n    }\r\n\r\n    let cleanedTime = new Date(Number(currentPost.time))\r\n    cleanedTime = cleanedTime.toString().split(' ')\r\n    // cleanedTime = cleanedTime.slice(1,4).join(' ') + ' ' + cleanedTime[4].split(':').slice(0,2).join(':')\r\n    cleanedTime = cleanedTime.slice(1,3).join(' ') + ', ' + cleanedTime[3]\r\n\r\n    let qandaList = currentPost.qanda ? currentPost.qanda.map(i => <PostQandA qanda={i} key={`QandA${i.question}`} />) : <Loading />\r\n    qandaList = qandaList.length ? qandaList : <div className={ppStyle.qandaText}>no question and answer pairs yet</div>\r\n    const skillsHTML = []\r\n    const questionStyle = skillExpanded ? {display: 'none'} : {display: 'block'}\r\n    const handleNotification = async (proposedContribution) => {\r\n        if (!props.currentUser) {\r\n            triggerAlert('warning', `sign in$: must be signed in to perform this action`, props.setAlert, props.resetAlert)\r\n            return null\r\n        }\r\n        if (!message.fields.value.length) {\r\n            triggerAlert('warning', `message$: message field is required`, props.setAlert, props.resetAlert)\r\n            return null\r\n        }\r\n        const result = await makeNotification({\r\n            variables: {\r\n                userFromId: props.currentUser._id,\r\n                userToId: currentPost.user._id,\r\n                message: message.fields.value,\r\n                postId: currentPost._id,\r\n                proposedContribution\r\n            }\r\n        })\r\n        if (result) {\r\n            setSkillExpanded(null)\r\n            message.reset()\r\n            triggerAlert('success', `sent$: (check your answered notifications for the response) request has been sent to ${currentPost.user.username}`, props.setAlert, props.resetAlert)\r\n        }\r\n    }\r\n    for (const ins in currentPost.skillNames) {\r\n        const skillName = currentPost.skillNames[ins]\r\n        const skillFill = currentPost.skillFills[ins]\r\n        const skillCap = currentPost.skillCapacities[ins]\r\n        const messageStyle = skillExpanded === skillName ? {display: 'block'} : {display: 'none'}\r\n        const buttonToShown = skillExpanded === skillName ?\r\n            <h4 onClick={() => setSkillExpanded(null)} className={ppStyle.PPSButtonExit}>X</h4>\r\n            :\r\n            skillFill < skillCap ?\r\n                <h4 onClick={() => setSkillExpanded(skillName)} className={ppStyle.PPSButton}>join</h4>\r\n                :\r\n                <h4 className={ppStyle.PPSButtonDisabled}>join</h4>\r\n\r\n        const skillProposition = Array(currentPost.skillNames.length).fill(0)\r\n        skillProposition[ins] = 1\r\n        skillsHTML.push( \r\n            <div className={ppStyle.PPSSkill} key={`PPSS${skillName}`}>\r\n                <div className={ppStyle.PPSDivision} />\r\n                <p className={ppStyle.PPSSkillName}>{skillName}</p>\r\n                <div className={ppStyle.PPSSkillSecondary}>\r\n                    <p className={ppStyle.PPSSkillInfo}>{skillFill}/{skillCap}</p>\r\n                    {buttonToShown}\r\n                </div>\r\n                <div className={ppStyle.PPSSkillForm} style={messageStyle}>\r\n                    <div className={ppStyle.PPSTitle}>\r\n                        <InputHeader inputFor=\"PPS-message\" info={false} title=\"message\" color=\"white\" />\r\n                    </div>\r\n                    <div className={ppStyle.PPSInputContainer}>\r\n                        <textarea className={ppStyle.PPSInput} id=\"PPS-message\" {...message.fields}></textarea>\r\n                    </div>\r\n                    <div className={ppStyle.PPCSubmitContainer}>\r\n                        {<h4 onClick={() => handleNotification(skillProposition)} className={ppStyle.PPSBButton} style={{borderColor: currentPost.color}}>join</h4>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const handleQuestion = async () => {\r\n        if (!props.currentUser) {\r\n            triggerAlert('warning', `sign in$: must be signed in to perform this action`, props.setAlert, props.resetAlert)\r\n            return null\r\n        }\r\n        if (!question.fields.value.length) {\r\n            triggerAlert('warning', `question$: question field is required`, props.setAlert, props.resetAlert)\r\n            return null\r\n        }\r\n        const result = await askQuestion({\r\n            variables: {\r\n                userFromId: props.currentUser._id,\r\n                userToId: currentPost.user._id,\r\n                postId: currentPost._id,\r\n                question: question.fields.value\r\n            }\r\n        })\r\n        if (result) {\r\n            question.reset()\r\n            triggerAlert('success', `sent$: (check your answered notifications for the response) question has been sent to ${currentPost.user.username}`, props.setAlert, props.resetAlert)\r\n        }\r\n    }\r\n    const pallette = palletteGenerator(currentPost.color).colorPallette\r\n\r\n    const teamHTML = currentPost.team ? currentPost.team.map(un =>\r\n        <Link to={`/user/${un}`} className={`${ppStyle.PPCUserContainer} neutralize-link`} key={`PT${un}`}>\r\n            <img className={ppStyle.PPCUserIcon} src='/svg/userB.svg' alt=\"user\" />\r\n            <p className=\"NM\">{un}</p>\r\n        </Link>\r\n        \r\n    ): null\r\n\r\n    const HomeContent = () => {\r\n        if (props.home) {\r\n            return (\r\n                <div className={ppStyle.homeOptions}>\r\n                    <Link to=\"/browse/\" className={`${ppStyle.homeOption} neutralize-link`} style={{backgroundColor: '#282828'}}>\r\n                        <img src='/svg/searchWW.svg' className={ppStyle.homeOptionIcon} alt=\"search\" />\r\n                        <h3 className={ppStyle.homeOptionText}>browse all</h3>\r\n                    </Link>\r\n                    <Link to=\"/post-form/\" className={`${ppStyle.homeOption} neutralize-link`} style={{backgroundColor: 'rgb(52,166,95)'}}>\r\n                        <img src='/svg/plusW.svg' className={ppStyle.homeOptionIcon} alt=\"add\" />\r\n                        <h3 className={ppStyle.homeOptionText}>add project</h3>\r\n                    </Link>\r\n                    <a href=\"https://discord.gg/v7vFc9U\" className={`${ppStyle.homeOption} ${ppStyle.homeOptionHighlight} neutralize-link`} style={{backgroundColor: '#7289DA'}}>\r\n                        <img src='/svg/websites/discord.svg' className={ppStyle.homeOptionIcon} alt=\"Discord\" />\r\n                        <h3 className={ppStyle.homeOptionText}>community discord</h3>\r\n                    </a>\r\n                </div>\r\n            )\r\n        }\r\n        else {\r\n            return null\r\n        }\r\n    }\r\n\r\n    const ModifiedDescription = () => {\r\n        const spacedDis = currentPost.description.split(' ')\r\n        for (const i in spacedDis) {\r\n            if (spacedDis[i].includes('https://')) {\r\n                spacedDis[i] = `<a href=\"${spacedDis[i]}\" class=\"p-link neutralize-link\">${spacedDis[i]}</a>`\r\n            }\r\n            if (spacedDis[i].includes('http://')) {\r\n                spacedDis[i] = `<a href=\"${spacedDis[i]}\" class=\"p-link neutralize-link\">${spacedDis[i]}</a>`\r\n            }\r\n        }\r\n        const finalDis = spacedDis.join(' ')\r\n        return <p className={ppStyle.PPCDescription} dangerouslySetInnerHTML={{__html: finalDis}} />\r\n    }\r\n    const skillCap = currentPost.skillCapacities.reduce((n, t) => t + n, 0)\r\n    const skillFill = currentPost.skillFills.reduce((n, t) => t + n, 0)\r\n    const titleKeywords = () => {\r\n        let title = currentPost.title\r\n        title = title.split(' ')\r\n        let keywords = title.map(w => {\r\n            if (w.slice(0, 1).toUpperCase() === w.slice(0, 1) && w.slice(0, 1).toLowerCase() === w.slice(0, 1)) return null\r\n            if (w.slice(0, 1).toUpperCase() === w.slice(0, 1)) return w + ','\r\n            return null\r\n        })\r\n        keywords = keywords.length ? keywords.join(' ') : title[0] + ', '\r\n        \r\n        return keywords\r\n    }\r\n    \r\n    // <Helmet>\r\n    //     <title>{currentPost.title}</title>\r\n    //     <meta name=\"author\" content={currentPost.user.username} />\r\n    //     <meta name=\"description\" content={`Join the project, be part of \"${currentPost.title}\" team! So far ${skillFill} awesome people have joined, there are only ${skillCap - skillFill} slots left.`} />\r\n    //     <meta name=\"keywords\" content={`${titleKeywords()} build, team`} />\r\n    // </Helmet>\r\n    return (\r\n        <div>\r\n            <div className=\"navbar-height\" />\r\n            <div className={ppStyle.postPageContainer}>\r\n                <div className={ppStyle.PPContent}>\r\n                    <HomeContent />\r\n                    <h2 className={ppStyle.PPCTitle}>{currentPost.title}</h2>\r\n                    <div className={ppStyle.PPCSubHeader}>\r\n                        <div to={`/user/${currentPost.user.username}`} className={`${ppStyle.PPCUserContainer} neutralize-link`}>\r\n                            <img className={ppStyle.PPCUserIcon} src='/svg/userB.svg' alt=\"user\" />\r\n                            <p className=\"NM\">{currentPost.user.username}</p>\r\n                        </div>\r\n                        <p className={ppStyle.PPCTime}>{cleanedTime}</p>\r\n                    </div>\r\n                    <ModifiedDescription />\r\n                    <PostImages imageLinks={currentPost.imageLinks} color={currentPost.color} />\r\n                    <PostLinks referenceLinks={currentPost.referenceLinks} />\r\n                    <h3 className={ppStyle.PPCTitle}>Q and A</h3>\r\n                    <div className={ppStyle.PPCAllQandaContainer}>\r\n                        {qandaList}\r\n                    </div>\r\n                    <h3 className={ppStyle.PPCTitle}>team</h3>\r\n                    <div className={ppStyle.teamInfo}>{teamHTML.length} team members</div>\r\n                    <div className={ppStyle.PPCTeamContainer}>\r\n                        {teamHTML}\r\n                    </div>\r\n                </div>\r\n                <FormContainer pallette={pallette}>\r\n                    <div  className={ppStyle.PPSFollowHeader} >\r\n                        <div onClick={() => handleFollow()} className={ppStyle.PPSFollowHeader} style={{borderTop: '2px solid currentPost.color'}}>\r\n                            <svg className={ppStyle.PPCUserIcon} fill={currentPost.color} viewBox=\"0 -28 512.00002 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m471.382812 44.578125c-26.503906-28.746094-62.871093-44.578125-102.410156-44.578125-29.554687 0-56.621094 9.34375-80.449218 27.769531-12.023438 9.300781-22.917969 20.679688-32.523438 33.960938-9.601562-13.277344-20.5-24.660157-32.527344-33.960938-23.824218-18.425781-50.890625-27.769531-80.445312-27.769531-39.539063 0-75.910156 15.832031-102.414063 44.578125-26.1875 28.410156-40.613281 67.222656-40.613281 109.292969 0 43.300781 16.136719 82.9375 50.78125 124.742187 30.992188 37.394531 75.535156 75.355469 127.117188 119.3125 17.613281 15.011719 37.578124 32.027344 58.308593 50.152344 5.476563 4.796875 12.503907 7.4375 19.792969 7.4375 7.285156 0 14.316406-2.640625 19.785156-7.429687 20.730469-18.128907 40.707032-35.152344 58.328125-50.171876 51.574219-43.949218 96.117188-81.90625 127.109375-119.304687 34.644532-41.800781 50.777344-81.4375 50.777344-124.742187 0-42.066407-14.425781-80.878907-40.617188-109.289063zm0 0\"/></svg>\r\n                            <p className=\"NM\">follow</p>\r\n                        </div>\r\n                    </div>\r\n                    {skillsHTML}\r\n                    <div style={questionStyle}>\r\n                        <div className={ppStyle.PPSDivision} />\r\n                        <div className={ppStyle.PPSTitle}>\r\n                            <InputHeader inputFor=\"PPS-question\" info={true} title=\"question\" color=\"white\" >\r\n                                <ul style={{margin: 0}}>\r\n                                    <li>if answered it will be shown on post</li>\r\n                                </ul>\r\n                            </InputHeader>\r\n                        </div>\r\n                        <div className={ppStyle.PPSInputContainer}>\r\n                            <textarea className={ppStyle.PPSInput} id=\"PPS-question\" {...question.fields}></textarea>\r\n                        </div>\r\n                        <div className={ppStyle.PPCSubmitContainer}>\r\n                            <h4 onClick={() => handleQuestion()} className={ppStyle.PPSButton} style={{borderColor: currentPost.color}}>ask</h4>\r\n                        </div>\r\n                    </div>\r\n                </FormContainer>\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\n\r\n// const mapStateToProps = (state) => {\r\n// \treturn {\r\n//         currentUser: state.currentUser,\r\n//         token: state.token\r\n// \t}\r\n// }\r\n// export default connect(\r\n//     mapStateToProps, \r\n//     { setAlert, resetAlert, setCurrentUserSP }\r\n// )(PostPage)\r\n\r\nexport async function getStaticPaths() {\r\n    const titlesQuery = await apolloClient.query({query: GET_POST_TITLES}).then((res) => {\r\n        return res\r\n    }).catch(err => console.log(err))\r\n    const paths = titlesQuery.data.allPosts.map(p => `/post/${encodeURIComponent(p.title)}`)\r\n    return {\r\n        paths,\r\n        fallback: false\r\n    }\r\n}\r\n\r\nexport async function getStaticProps(context) {\r\n    const postQuery = await apolloClient.query({\r\n        query: FIND_POST,\r\n        variables: {title: context.params.title} \r\n    }).catch(err => console.log(err))\r\n    return {\r\n        props: {\r\n            post: postQuery.data.findPost,\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n        currentUser: state.currentUser,\r\n        token: state.token,\r\n        alertNotif: state.alertNotif,\r\n\t}\r\n}\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setAlert: bindActionCreators(setAlert, dispatch),\r\n        resetAlert: bindActionCreators(resetAlert, dispatch),\r\n        setToken: bindActionCreators(setToken, dispatch),\r\n        setCurrentUserSP: bindActionCreators(setCurrentUserSP, dispatch)\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(PostPage)"]},"metadata":{},"sourceType":"module"}