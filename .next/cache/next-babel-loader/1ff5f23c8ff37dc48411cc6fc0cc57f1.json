{"ast":null,"code":"var _jsxFileName = \"C:\\\\Code\\\\Projects\\\\projectU\\\\projectu\\\\components\\\\user\\\\structure\\\\Logged.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { useQuery } from '@apollo/react-hooks';\nimport { FIND_USER } from '../../../src/schemas/queries';\nimport { setCurrentUser } from '../../../redux/reducers/currentUser';\nimport { clearToken } from '../../../redux/reducers/token';\nimport UserNotifList from '../utilities/UserNotifList';\nimport UserSP from '../utilities/UserSP';\nimport UU from '../../../styles/user/userUtilities.module.css';\nimport UR from '../../../styles/user/user.module.css';\n\nconst Logged = props => {\n  _s();\n\n  const {\n    0: showUtilities,\n    1: setShowUtilities\n  } = useState(true);\n  const {\n    0: utilityShown,\n    1: setUtilityShown\n  } = useState('');\n  const currentUserUN = localStorage.getItem('username') ? localStorage.getItem('username') : 'fakeUser';\n  const userQuery = useQuery(FIND_USER, {\n    variables: {\n      username: currentUserUN\n    }\n  });\n\n  const userQueryConditions = () => {\n    const query = userQuery.data;\n    const reducer = props.currentUser;\n\n    if (!query) {\n      return null;\n    }\n\n    if (!query.findUser) {\n      return null;\n    }\n\n    if (reducer) {\n      if (query.findUser.username === reducer.username) {\n        return null;\n      }\n    }\n\n    return query.findUser;\n  };\n\n  const userResult = userQueryConditions();\n  useEffect(() => {\n    if (userResult) {\n      props.setCurrentUser(userResult);\n    }\n  }, [props, props.currentUser, userResult]);\n\n  if (!props.currentUser) {\n    return __jsx(\"div\", {\n      className: `${UR.user - container} ${UR.LGD - user - container}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: UR.user - options - splitter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: UR.user - icon - container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 21\n      }\n    })), __jsx(\"div\", {\n      className: UR.user - banner,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }\n    }));\n  }\n\n  const logout = () => {\n    localStorage.clear();\n    props.clearToken();\n  };\n\n  const changeUtilityShown = changeTo => {\n    if (changeTo === utilityShown) {\n      setUtilityShown(null);\n    } else {\n      setUtilityShown(changeTo);\n    }\n\n    setShowUtilities(true);\n  };\n\n  const changeShowUtilities = changeTo => {\n    if (!changeTo) {\n      setShowUtilities(changeTo);\n      setUtilityShown(null);\n    } else {\n      setShowUtilities(changeTo);\n    }\n  };\n\n  const usernameIcon = props.currentUser.username.substr(0, 1).toUpperCase();\n  const iconToShow = showUtilities ? __jsx(\"div\", {\n    to: `/user/${encodeURIComponent(props.currentUser.username)}`,\n    className: \"user-icon-container UICH neutralize-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: `\"{user-username-icon} ${UR.user - icon - hover}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, usernameIcon)) : __jsx(\"div\", {\n    to: `/user/${encodeURIComponent(props.currentUser.username)}`,\n    className: \"user-icon-container UICH\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, __jsx(\"img\", {\n    src: \"/svg/userW.svg\",\n    className: \"user-icon user-icon-hover\",\n    alt: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }));\n  const basicStyles = {\n    user: {\n      className: '',\n      icon: \"/svg/userSB.svg\"\n    },\n    notifications: {\n      className: '',\n      icon: \"/svg/bellB.svg\"\n    },\n    following: {\n      className: '',\n      icon: \"/svg/heartB.svg\"\n    }\n  };\n\n  if (utilityShown === 'user') {\n    basicStyles.user = {\n      className: 'UUO-selected',\n      icon: \"/svg/userW.svg\"\n    };\n  }\n\n  if (utilityShown === 'notifications') {\n    basicStyles.notifications = {\n      className: 'UUO-selected',\n      icon: \"/svg/bellW.svg\"\n    };\n  }\n\n  if (utilityShown === 'following') {\n    basicStyles.following = {\n      className: 'UUO-selected',\n      icon: \"/svg/heartW.svg\"\n    };\n  }\n\n  const pendingNotifStats = props.currentUser && props.currentUser.pendingNotifications > 0 ? ['PN-bubble', props.currentUser.pendingNotifications] : [null, null];\n  const showInBanner = showUtilities ? __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    to: \"/post-form/\",\n    className: \"UU-add-post user-utility-option neutralize-link\",\n    style: {\n      gridColumn: '1/3'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: \"/svg/plusB.svg\",\n    className: \"UUAP-icon\",\n    alt: \"add post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }), __jsx(\"h4\", {\n    className: \"UUAP-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, \"add post\")), __jsx(\"div\", {\n    to: `/user/${props.currentUser.username}`,\n    className: `user-utility-option ${basicStyles.user.className}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: basicStyles.user.icon,\n    className: \"UU-icon\",\n    alt: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    onClick: () => changeUtilityShown('notifications'),\n    className: `user-utility-option PN-container ${basicStyles.notifications.className}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: basicStyles.notifications.icon,\n    className: \"UU-icon\",\n    alt: \"notifications\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    className: pendingNotifStats[0],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, pendingNotifStats[1])), __jsx(\"div\", {\n    onClick: () => changeUtilityShown('following'),\n    className: `user-utility-option ${basicStyles.following.className}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: basicStyles.following.icon,\n    className: \"UU-icon\",\n    alt: \"follow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    onClick: () => logout(),\n    className: \"user-utility-option UU-logout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: \"/svg/exitB.svg\",\n    className: \"UU-logout-icon\",\n    alt: \"log out\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }))) : __jsx(\"div\", {\n    onClick: () => changeShowUtilities(!showUtilities),\n    className: \"user-username-container SUH\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, __jsx(\"h2\", {\n    className: \"user-username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 106\n    }\n  }, props.currentUser.username));\n  const showBubble = showUtilities ? __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }) : __jsx(\"div\", {\n    onClick: () => changeUtilityShown('notifications'),\n    className: \"user-notification-bubble\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, \"4\");\n  const showUtilityContent = utilityShown ? {\n    display: 'block'\n  } : {\n    display: 'none'\n  };\n\n  const utilityContent = () => {\n    // if (utilityShown === 'user') {\n    //     return <div><UserInfo /></div>\n    // }\n    if (utilityShown === 'notifications') {\n      return __jsx(UserNotifList, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 20\n        }\n      });\n    }\n\n    if (utilityShown === 'following') {\n      return __jsx(UserSP, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return null;\n  };\n\n  return __jsx(\"div\", {\n    className: \"user-container LGD-user-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"user-options-splitter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, iconToShow), __jsx(\"div\", {\n    className: \"user-banner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, showInBanner), showBubble, __jsx(\"div\", {\n    className: \"UU-utilities-splitter\",\n    style: showUtilityContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: \"UU-content-container\",\n    style: showUtilityContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, utilityShown), utilityContent()));\n};\n\n_s(Logged, \"BMmyJQDn6G0Gg2TGQpL0f23iMdQ=\", false, function () {\n  return [useQuery];\n});\n\n_c = Logged;\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.currentUser\n  };\n};\n\nexport default connect(mapStateToProps, {\n  clearToken,\n  setCurrentUser\n})(Logged);\n\nvar _c;\n\n$RefreshReg$(_c, \"Logged\");","map":{"version":3,"sources":["C:/Code/Projects/projectU/projectu/components/user/structure/Logged.js"],"names":["React","useState","useEffect","connect","useQuery","FIND_USER","setCurrentUser","clearToken","UserNotifList","UserSP","UU","UR","Logged","props","showUtilities","setShowUtilities","utilityShown","setUtilityShown","currentUserUN","localStorage","getItem","userQuery","variables","username","userQueryConditions","query","data","reducer","currentUser","findUser","userResult","user","container","LGD","options","splitter","icon","banner","logout","clear","changeUtilityShown","changeTo","changeShowUtilities","usernameIcon","substr","toUpperCase","iconToShow","encodeURIComponent","hover","basicStyles","className","notifications","following","pendingNotifStats","pendingNotifications","showInBanner","gridColumn","showBubble","showUtilityContent","display","utilityContent","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { useQuery } from '@apollo/react-hooks'\r\nimport { FIND_USER } from '../../../src/schemas/queries'\r\nimport { setCurrentUser } from '../../../redux/reducers/currentUser'\r\nimport { clearToken } from '../../../redux/reducers/token'\r\nimport UserNotifList from '../utilities/UserNotifList'\r\nimport UserSP from '../utilities/UserSP'\r\nimport UU from '../../../styles/user/userUtilities.module.css'\r\nimport UR from '../../../styles/user/user.module.css'\r\n\r\nconst Logged = (props) => {\r\n    const [showUtilities, setShowUtilities] = useState(true)\r\n    const [utilityShown, setUtilityShown] = useState('')\r\n\r\n    const currentUserUN = localStorage.getItem('username') ? localStorage.getItem('username') : 'fakeUser'\r\n    const userQuery = useQuery(FIND_USER, {\r\n        variables: {username: currentUserUN}\r\n    })\r\n    const userQueryConditions = () => {\r\n        const query = userQuery.data\r\n        const reducer = props.currentUser\r\n        if (!query) { return null }\r\n        if (!query.findUser) { return null }\r\n        if (reducer) {\r\n            if (query.findUser.username === reducer.username) { return null }\r\n        }\r\n        return query.findUser\r\n    }\r\n    const userResult = userQueryConditions()\r\n\r\n    useEffect(() => {\r\n        if (userResult) {\r\n            props.setCurrentUser(userResult)\r\n        }\r\n    }, [props, props.currentUser, userResult])\r\n\r\n    if (!props.currentUser) {\r\n        return (\r\n            <div className={`${UR.user-container} ${UR.LGD-user-container}`}>\r\n                <div className={UR.user-options-splitter}>\r\n                    <div className={UR.user-icon-container}>\r\n                        {/* <img src=\"/svg/userW.svg\" className=\"user-icon\" alt=\"user\" /> */}\r\n                    </div>\r\n                </div>\r\n                <div className={UR.user-banner}>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n    const logout = () => {\r\n        localStorage.clear()\r\n        props.clearToken()\r\n    }\r\n\r\n    const changeUtilityShown = (changeTo) => {\r\n        if (changeTo === utilityShown) {\r\n            setUtilityShown(null)\r\n        }\r\n        else {\r\n            setUtilityShown(changeTo)\r\n        }\r\n        setShowUtilities(true)\r\n    }\r\n    const changeShowUtilities = (changeTo) => {\r\n        if (!changeTo) {\r\n            setShowUtilities(changeTo)\r\n            setUtilityShown(null)\r\n        }\r\n        else {\r\n            setShowUtilities(changeTo)\r\n        }\r\n    }\r\n    const usernameIcon = props.currentUser.username.substr(0, 1).toUpperCase()\r\n\r\n    const iconToShow = showUtilities ?\r\n        <div to={`/user/${encodeURIComponent(props.currentUser.username)}`} className=\"user-icon-container UICH neutralize-link\">\r\n            <h1 className={`\"{user-username-icon} ${UR.user-icon-hover}`}>{usernameIcon}</h1>\r\n        </div>\r\n        :\r\n        <div to={`/user/${encodeURIComponent(props.currentUser.username)}`} className=\"user-icon-container UICH\">\r\n            <img src=\"/svg/userW.svg\" className=\"user-icon user-icon-hover\" alt=\"user\" />\r\n        </div>\r\n\r\n    const basicStyles = {user: {className: '', icon: \"/svg/userSB.svg\"}, notifications: {className: '', icon: \"/svg/bellB.svg\"}, following: {className: '', icon: \"/svg/heartB.svg\"}}\r\n    if (utilityShown === 'user') { basicStyles.user = {className: 'UUO-selected', icon: \"/svg/userW.svg\"}}\r\n    if (utilityShown === 'notifications') { basicStyles.notifications = {className: 'UUO-selected', icon: \"/svg/bellW.svg\"}}\r\n    if (utilityShown === 'following') { basicStyles.following = {className: 'UUO-selected', icon: \"/svg/heartW.svg\"}}\r\n    \r\n    const pendingNotifStats = props.currentUser && props.currentUser.pendingNotifications > 0 ?\r\n        ['PN-bubble', props.currentUser.pendingNotifications] : [null, null]\r\n\r\n    const showInBanner = showUtilities ?\r\n        <React.Fragment>\r\n            <div to=\"/post-form/\" className=\"UU-add-post user-utility-option neutralize-link\" style={{gridColumn: '1/3'}}>\r\n                <img src=\"/svg/plusB.svg\" className=\"UUAP-icon\" alt=\"add post\"/>\r\n                <h4 className=\"UUAP-text\">add post</h4>\r\n            </div>\r\n            <div to={`/user/${props.currentUser.username}`} className={`user-utility-option ${basicStyles.user.className}`}>\r\n                <img src={basicStyles.user.icon} className=\"UU-icon\" alt=\"user\" />\r\n            </div>\r\n            <div onClick={() => changeUtilityShown('notifications')} className={`user-utility-option PN-container ${basicStyles.notifications.className}`}>\r\n                <img src={basicStyles.notifications.icon} className=\"UU-icon\" alt=\"notifications\" />\r\n                <div className={pendingNotifStats[0]}>{pendingNotifStats[1]}</div>\r\n            </div>\r\n            <div onClick={() => changeUtilityShown('following')} className={`user-utility-option ${basicStyles.following.className}`}>\r\n                <img src={basicStyles.following.icon} className=\"UU-icon\" alt=\"follow\" />\r\n            </div>\r\n            <div onClick={() => logout()} className=\"user-utility-option UU-logout\">\r\n                <img src=\"/svg/exitB.svg\" className=\"UU-logout-icon\" alt=\"log out\" />\r\n            </div>\r\n        </React.Fragment>\r\n        :\r\n        <div onClick={() => changeShowUtilities(!showUtilities)} className=\"user-username-container SUH\"><h2 className=\"user-username\">{props.currentUser.username}</h2></div>\r\n\r\n    const showBubble = showUtilities ?\r\n        <div />\r\n        :\r\n        <div onClick={() => changeUtilityShown('notifications')} className=\"user-notification-bubble\">4</div>\r\n\r\n\r\n    const showUtilityContent = utilityShown ? \r\n        {display: 'block'} : {display: 'none'}\r\n\r\n    const utilityContent = () => {\r\n        // if (utilityShown === 'user') {\r\n        //     return <div><UserInfo /></div>\r\n        // }\r\n        if (utilityShown === 'notifications') {\r\n            return <UserNotifList />\r\n        }\r\n        if (utilityShown === 'following') {\r\n            return <UserSP />\r\n        }\r\n        return null\r\n    }\r\n    \r\n    return (\r\n        <div className=\"user-container LGD-user-container\">\r\n            <div className=\"user-options-splitter\">\r\n                {iconToShow}\r\n            </div>\r\n            <div className=\"user-banner\">\r\n                {showInBanner}\r\n            </div>\r\n            {showBubble}\r\n            <div className=\"UU-utilities-splitter\" style={showUtilityContent}/>\r\n            <div className=\"UU-content-container\" style={showUtilityContent}>\r\n                <h3>{utilityShown}</h3>\r\n                {utilityContent()}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n        currentUser: state.currentUser\r\n\t}\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    { clearToken, setCurrentUser }\r\n)(Logged)"]},"metadata":{},"sourceType":"module"}