{"ast":null,"code":"var _jsxFileName = \"C:\\\\Code\\\\Projects\\\\projectU\\\\projectu\\\\components\\\\user\\\\structure\\\\Logged.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { useQuery } from '@apollo/react-hooks';\nimport { FIND_USER } from '../../../src/schemas/queries';\nimport { setCurrentUser } from '../../../redux/reducers/currentUser';\nimport { clearToken } from '../../../redux/reducers/token';\nimport UserNotifList from '../utilities/UserNotifList';\nimport UserSP from '../utilities/UserSP';\nimport UU from '../../../styles/user/userUtilities.module.css';\nimport UR from '../../../styles/user/user.module.css';\nimport { bindActionCreators } from 'redux';\n\nconst Logged = props => {\n  _s();\n\n  const {\n    0: showUtilities,\n    1: setShowUtilities\n  } = useState(true);\n  const {\n    0: utilityShown,\n    1: setUtilityShown\n  } = useState('');\n  const currentUserUN = localStorage.getItem('username') ? localStorage.getItem('username') : 'fakeUser';\n  const userQuery = useQuery(FIND_USER, {\n    variables: {\n      username: currentUserUN\n    }\n  });\n\n  const userQueryConditions = () => {\n    const query = userQuery.data;\n    const reducer = props.currentUser;\n\n    if (!query) {\n      return null;\n    }\n\n    if (!query.findUser) {\n      return null;\n    }\n\n    if (reducer) {\n      if (query.findUser.username === reducer.username) {\n        return null;\n      }\n    }\n\n    return query.findUser;\n  };\n\n  const userResult = userQueryConditions();\n  useEffect(() => {\n    if (userResult) {\n      props.setCurrentUser(userResult);\n    }\n  }, [props, props.currentUser, userResult]);\n\n  if (!props.currentUser) {\n    return __jsx(\"div\", {\n      className: `${UR.userContainer} ${UR.LGD - user - container}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: UR.userOptionsSplitter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: UR.userIconContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 21\n      }\n    })), __jsx(\"div\", {\n      className: UR.userBanner,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }\n    }));\n  }\n\n  const logout = () => {\n    localStorage.clear();\n    props.clearToken();\n  };\n\n  const changeUtilityShown = changeTo => {\n    if (changeTo === utilityShown) {\n      setUtilityShown(null);\n    } else {\n      setUtilityShown(changeTo);\n    }\n\n    setShowUtilities(true);\n  };\n\n  const changeShowUtilities = changeTo => {\n    if (!changeTo) {\n      setShowUtilities(changeTo);\n      setUtilityShown(null);\n    } else {\n      setShowUtilities(changeTo);\n    }\n  };\n\n  const usernameIcon = props.currentUser.username.substr(0, 1).toUpperCase();\n  const iconToShow = showUtilities ? __jsx(\"div\", {\n    to: `/user/${encodeURIComponent(props.currentUser.username)}`,\n    className: \"user-icon-container UICH neutralize-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: `${UR.userUsernameIcon} ${UR.userIconHover}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, usernameIcon)) : __jsx(\"div\", {\n    to: `/user/${encodeURIComponent(props.currentUser.username)}`,\n    className: \"user-icon-container UICH\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, __jsx(\"img\", {\n    src: \"/svg/userW.svg\",\n    className: `${UR.userIcon} ${UR.userIconHover}`,\n    alt: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }));\n  const basicStyles = {\n    user: {\n      className: '',\n      icon: \"/svg/userSB.svg\"\n    },\n    notifications: {\n      className: '',\n      icon: \"/svg/bellB.svg\"\n    },\n    following: {\n      className: '',\n      icon: \"/svg/heartB.svg\"\n    }\n  };\n\n  if (utilityShown === 'user') {\n    basicStyles.user = {\n      className: UR.UUOSelected,\n      icon: \"/svg/userW.svg\"\n    };\n  }\n\n  if (utilityShown === 'notifications') {\n    basicStyles.notifications = {\n      className: UR.UUOSelected,\n      icon: \"/svg/bellW.svg\"\n    };\n  }\n\n  if (utilityShown === 'following') {\n    basicStyles.following = {\n      className: UR.UUOSelected,\n      icon: \"/svg/heartW.svg\"\n    };\n  }\n\n  const pendingNotifStats = props.currentUser && props.currentUser.pendingNotifications > 0 ? [UR.PN - bubble, props.currentUser.pendingNotifications] : [null, null];\n  const showInBanner = showUtilities ? __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    to: \"/post-form/\",\n    className: `${UR.UUAddPost} ${UR.userUtilityOption} neutralize-link`,\n    style: {\n      gridColumn: '1/3'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: \"/svg/plusB.svg\",\n    className: UR.UUAPIcon,\n    alt: \"add post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }), __jsx(\"h4\", {\n    className: UR.UUAPText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, \"add post\")), __jsx(\"div\", {\n    to: `/user/${props.currentUser.username}`,\n    className: `${UR.userUtilityOption} ${basicStyles.user.className}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: basicStyles.user.icon,\n    className: \"UU-icon\",\n    alt: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    onClick: () => changeUtilityShown('notifications'),\n    className: `${UR.userUtilityOption} ${UR.PNContainer} ${basicStyles.notifications.className}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: basicStyles.notifications.icon,\n    className: \"UU-icon\",\n    alt: \"notifications\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    className: pendingNotifStats[0],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, pendingNotifStats[1])), __jsx(\"div\", {\n    onClick: () => changeUtilityShown('following'),\n    className: `${UR.userUtilityOption} ${basicStyles.following.className}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: basicStyles.following.icon,\n    className: UR.UU - icon,\n    alt: \"follow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    onClick: () => logout(),\n    className: `${UR.userUtilityOption} ${UR.UULogout}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: \"/svg/exitB.svg\",\n    className: UR.UU - logout - icon,\n    alt: \"log out\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }))) : __jsx(\"div\", {\n    onClick: () => changeShowUtilities(!showUtilities),\n    className: `${UR.userUsernameContainer} ${UR.SUH}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, __jsx(\"h2\", {\n    className: \"user-username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 118\n    }\n  }, props.currentUser.username));\n  const showBubble = showUtilities ? __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }) : __jsx(\"div\", {\n    onClick: () => changeUtilityShown('notifications'),\n    className: UR.userNotificationBubble,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, \"4\");\n  const showUtilityContent = utilityShown ? {\n    display: 'block'\n  } : {\n    display: 'none'\n  };\n\n  const utilityContent = () => {\n    // if (utilityShown === 'user') {\n    //     return <div><UserInfo /></div>\n    // }\n    if (utilityShown === 'notifications') {\n      return __jsx(UserNotifList, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 20\n        }\n      });\n    }\n\n    if (utilityShown === 'following') {\n      return __jsx(UserSP, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return null;\n  };\n\n  return __jsx(\"div\", {\n    className: `${UR.userContainer} ${UR.LGDUserContainer}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: UR.userOptionsSplitter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, iconToShow), __jsx(\"div\", {\n    className: UR.userBanner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }, showInBanner), showBubble, __jsx(\"div\", {\n    className: UR.UUUtilitiesSplitter,\n    style: showUtilityContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: UR.UUContentContainer,\n    style: showUtilityContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, utilityShown), utilityContent()));\n};\n\n_s(Logged, \"BMmyJQDn6G0Gg2TGQpL0f23iMdQ=\", false, function () {\n  return [useQuery];\n});\n\n_c = Logged;\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.currentUser\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    clearToken: bindActionCreators(clearToken, dispatch),\n    setCurrentUser: bindActionCreators(setCurrentUser, dispatch)\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Logged);\n\nvar _c;\n\n$RefreshReg$(_c, \"Logged\");","map":{"version":3,"sources":["C:/Code/Projects/projectU/projectu/components/user/structure/Logged.js"],"names":["React","useState","useEffect","connect","useQuery","FIND_USER","setCurrentUser","clearToken","UserNotifList","UserSP","UU","UR","bindActionCreators","Logged","props","showUtilities","setShowUtilities","utilityShown","setUtilityShown","currentUserUN","localStorage","getItem","userQuery","variables","username","userQueryConditions","query","data","reducer","currentUser","findUser","userResult","userContainer","LGD","user","container","userOptionsSplitter","userIconContainer","userBanner","logout","clear","changeUtilityShown","changeTo","changeShowUtilities","usernameIcon","substr","toUpperCase","iconToShow","encodeURIComponent","userUsernameIcon","userIconHover","userIcon","basicStyles","className","icon","notifications","following","UUOSelected","pendingNotifStats","pendingNotifications","PN","bubble","showInBanner","UUAddPost","userUtilityOption","gridColumn","UUAPIcon","UUAPText","PNContainer","UULogout","userUsernameContainer","SUH","showBubble","userNotificationBubble","showUtilityContent","display","utilityContent","LGDUserContainer","UUUtilitiesSplitter","UUContentContainer","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { useQuery } from '@apollo/react-hooks'\r\nimport { FIND_USER } from '../../../src/schemas/queries'\r\nimport { setCurrentUser } from '../../../redux/reducers/currentUser'\r\nimport { clearToken } from '../../../redux/reducers/token'\r\nimport UserNotifList from '../utilities/UserNotifList'\r\nimport UserSP from '../utilities/UserSP'\r\nimport UU from '../../../styles/user/userUtilities.module.css'\r\nimport UR from '../../../styles/user/user.module.css'\r\nimport {bindActionCreators} from 'redux'\r\n\r\nconst Logged = (props) => {\r\n    const [showUtilities, setShowUtilities] = useState(true)\r\n    const [utilityShown, setUtilityShown] = useState('')\r\n\r\n    const currentUserUN = localStorage.getItem('username') ? localStorage.getItem('username') : 'fakeUser'\r\n    const userQuery = useQuery(FIND_USER, {\r\n        variables: {username: currentUserUN}\r\n    })\r\n    const userQueryConditions = () => {\r\n        const query = userQuery.data\r\n        const reducer = props.currentUser\r\n        if (!query) { return null }\r\n        if (!query.findUser) { return null }\r\n        if (reducer) {\r\n            if (query.findUser.username === reducer.username) { return null }\r\n        }\r\n        return query.findUser\r\n    }\r\n    const userResult = userQueryConditions()\r\n\r\n    useEffect(() => {\r\n        if (userResult) {\r\n            props.setCurrentUser(userResult)\r\n        }\r\n    }, [props, props.currentUser, userResult])\r\n\r\n    if (!props.currentUser) {\r\n        return (\r\n            <div className={`${UR.userContainer} ${UR.LGD-user-container}`}>\r\n                <div className={UR.userOptionsSplitter}>\r\n                    <div className={UR.userIconContainer}>\r\n                        {/* <img src=\"/svg/userW.svg\" className=\"user-icon\" alt=\"user\" /> */}\r\n                    </div>\r\n                </div>\r\n                <div className={UR.userBanner}>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n    const logout = () => {\r\n        localStorage.clear()\r\n        props.clearToken()\r\n    }\r\n\r\n    const changeUtilityShown = (changeTo) => {\r\n        if (changeTo === utilityShown) {\r\n            setUtilityShown(null)\r\n        }\r\n        else {\r\n            setUtilityShown(changeTo)\r\n        }\r\n        setShowUtilities(true)\r\n    }\r\n    const changeShowUtilities = (changeTo) => {\r\n        if (!changeTo) {\r\n            setShowUtilities(changeTo)\r\n            setUtilityShown(null)\r\n        }\r\n        else {\r\n            setShowUtilities(changeTo)\r\n        }\r\n    }\r\n    const usernameIcon = props.currentUser.username.substr(0, 1).toUpperCase()\r\n\r\n    const iconToShow = showUtilities ?\r\n        <div to={`/user/${encodeURIComponent(props.currentUser.username)}`} className=\"user-icon-container UICH neutralize-link\">\r\n            <h1 className={`${UR.userUsernameIcon} ${UR.userIconHover}`}>{usernameIcon}</h1>\r\n        </div>\r\n        :\r\n        <div to={`/user/${encodeURIComponent(props.currentUser.username)}`} className=\"user-icon-container UICH\">\r\n            <img src=\"/svg/userW.svg\" className={`${UR.userIcon} ${UR.userIconHover}`} alt=\"user\" />\r\n        </div>\r\n\r\n    const basicStyles = {user: {className: '', icon: \"/svg/userSB.svg\"}, notifications: {className: '', icon: \"/svg/bellB.svg\"}, following: {className: '', icon: \"/svg/heartB.svg\"}}\r\n    if (utilityShown === 'user') { basicStyles.user = {className: UR.UUOSelected, icon: \"/svg/userW.svg\"}}\r\n    if (utilityShown === 'notifications') { basicStyles.notifications = {className: UR.UUOSelected, icon: \"/svg/bellW.svg\"}}\r\n    if (utilityShown === 'following') { basicStyles.following = {className: UR.UUOSelected, icon: \"/svg/heartW.svg\"}}\r\n    \r\n    const pendingNotifStats = props.currentUser && props.currentUser.pendingNotifications > 0 ?\r\n        [UR.PN-bubble, props.currentUser.pendingNotifications] : [null, null]\r\n\r\n    const showInBanner = showUtilities ?\r\n        <React.Fragment>\r\n            <div to=\"/post-form/\" className={`${UR.UUAddPost} ${UR.userUtilityOption} neutralize-link`} style={{gridColumn: '1/3'}}>\r\n                <img src=\"/svg/plusB.svg\" className={UR.UUAPIcon} alt=\"add post\"/>\r\n                <h4 className={UR.UUAPText}>add post</h4>\r\n            </div>\r\n            <div to={`/user/${props.currentUser.username}`} className={`${UR.userUtilityOption} ${basicStyles.user.className}`}>\r\n                <img src={basicStyles.user.icon} className=\"UU-icon\" alt=\"user\" />\r\n            </div>\r\n            <div onClick={() => changeUtilityShown('notifications')} className={`${UR.userUtilityOption} ${UR.PNContainer} ${basicStyles.notifications.className}`}>\r\n                <img src={basicStyles.notifications.icon} className=\"UU-icon\" alt=\"notifications\" />\r\n                <div className={pendingNotifStats[0]}>{pendingNotifStats[1]}</div>\r\n            </div>\r\n            <div onClick={() => changeUtilityShown('following')} className={`${UR.userUtilityOption} ${basicStyles.following.className}`}>\r\n                <img src={basicStyles.following.icon} className={UR.UU-icon} alt=\"follow\" />\r\n            </div>\r\n            <div onClick={() => logout()} className={`${UR.userUtilityOption} ${UR.UULogout}`}>\r\n                <img src=\"/svg/exitB.svg\" className={UR.UU-logout-icon} alt=\"log out\" />\r\n            </div>\r\n        </React.Fragment>\r\n        :\r\n        <div onClick={() => changeShowUtilities(!showUtilities)} className={`${UR.userUsernameContainer} ${UR.SUH}`}><h2 className=\"user-username\">{props.currentUser.username}</h2></div>\r\n\r\n    const showBubble = showUtilities ?\r\n        <div />\r\n        :\r\n        <div onClick={() => changeUtilityShown('notifications')} className={UR.userNotificationBubble}>4</div>\r\n\r\n\r\n    const showUtilityContent = utilityShown ? \r\n        {display: 'block'} : {display: 'none'}\r\n\r\n    const utilityContent = () => {\r\n        // if (utilityShown === 'user') {\r\n        //     return <div><UserInfo /></div>\r\n        // }\r\n        if (utilityShown === 'notifications') {\r\n            return <UserNotifList />\r\n        }\r\n        if (utilityShown === 'following') {\r\n            return <UserSP />\r\n        }\r\n        return null\r\n    }\r\n    \r\n    return (\r\n        <div className={`${UR.userContainer} ${UR.LGDUserContainer}`}>\r\n            <div className={UR.userOptionsSplitter}>\r\n                {iconToShow}\r\n            </div>\r\n            <div className={UR.userBanner}>\r\n                {showInBanner}\r\n            </div>\r\n            {showBubble}\r\n            <div className={UR.UUUtilitiesSplitter} style={showUtilityContent}/>\r\n            <div className={UR.UUContentContainer} style={showUtilityContent}>\r\n                <h3>{utilityShown}</h3>\r\n                {utilityContent()}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n        currentUser: state.currentUser\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        clearToken: bindActionCreators(clearToken, dispatch),\r\n        setCurrentUser: bindActionCreators(setCurrentUser, dispatch),\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Logged)"]},"metadata":{},"sourceType":"module"}